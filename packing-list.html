<!DOCTYPE html>
<html ng-app="cleanUI">
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>AdValoram Clothing</title>

    <link href="assets/common/img/favicon.144x144.png" rel="apple-touch-icon" type="image/png" sizes="144x144">
    <link href="assets/common/img/favicon.114x114.png" rel="apple-touch-icon" type="image/png" sizes="114x114">
    <link href="assets/common/img/favicon.72x72.png" rel="apple-touch-icon" type="image/png" sizes="72x72">
    <link href="assets/common/img/favicon.57x57.png" rel="apple-touch-icon" type="image/png">
    <link href="assets/common/img/favicon.png" rel="icon" type="image/png">
    <link href="../favicon.ico" rel="shortcut icon">

    <!-- HTML5 shim and Respond.js for < IE9 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Vendors Styles -->
    <!-- v1.0.0 -->
    <link rel="stylesheet" type="text/css" href="assets/vendors/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/jscrollpane/style/jquery.jscrollpane.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/ladda/dist/ladda-themeless.min.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/select2/dist/css/select2.min.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/fullcalendar/dist/fullcalendar.min.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/cleanhtmlaudioplayer/src/player.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/cleanhtmlvideoplayer/src/player.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/bootstrap-sweetalert/dist/sweetalert.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/summernote/dist/summernote.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/owl.carousel/dist/assets/owl.carousel.min.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/ionrangeslider/css/ion.rangeSlider.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/datatables/media/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/c3/c3.min.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/chartist/dist/chartist.min.css">
    <!-- v1.4.0 -->
    <link rel="stylesheet" type="text/css" href="assets/vendors/nprogress/nprogress.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/jquery-steps/demo/css/jquery.steps.css">
    <!-- v1.4.2 -->
    <link rel="stylesheet" type="text/css" href="assets/vendors/bootstrap-select/dist/css/bootstrap-select.min.css">
    <!-- v1.7.0 -->
    <link rel="stylesheet" type="text/css" href="assets/vendors/dropify/dist/css/dropify.min.css">

    <!-- Clean UI Styles -->
    <link rel="stylesheet" type="text/css" href="assets/common/css/source/main.css">

    <!-- Vendors Scripts -->
    <!-- v1.0.0 -->
    <script src="assets/vendors/jquery/jquery.min.js"></script>
    <script src="assets/vendors/tether/dist/js/tether.min.js"></script>
    <script src="assets/vendors/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="assets/vendors/jquery-mousewheel/jquery.mousewheel.min.js"></script>
    <script src="assets/vendors/jscrollpane/script/jquery.jscrollpane.min.js"></script>
    <script src="assets/vendors/spin.js/spin.js"></script>
    <script src="assets/vendors/ladda/dist/ladda.min.js"></script>
    <script src="assets/vendors/select2/dist/js/select2.full.min.js"></script>
    <script src="assets/vendors/html5-form-validation/dist/jquery.validation.min.js"></script>
    <script src="assets/vendors/jquery-typeahead/dist/jquery.typeahead.min.js"></script>
    <script src="assets/vendors/jquery-mask-plugin/dist/jquery.mask.min.js"></script>
    <script src="assets/vendors/autosize/dist/autosize.min.js"></script>
    <script src="assets/vendors/bootstrap-show-password/bootstrap-show-password.min.js"></script>
    <script src="assets/vendors/moment/min/moment.min.js"></script>
    <script src="assets/vendors/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>
    <script src="assets/vendors/fullcalendar/dist/fullcalendar.min.js"></script>
    <script src="assets/vendors/cleanhtmlaudioplayer/src/jquery.cleanaudioplayer.js"></script>
    <script src="assets/vendors/cleanhtmlvideoplayer/src/jquery.cleanvideoplayer.js"></script>
    <script src="assets/vendors/bootstrap-sweetalert/dist/sweetalert.min.js"></script>
    <script src="assets/vendors/remarkable-bootstrap-notify/dist/bootstrap-notify.min.js"></script>
    <script src="assets/vendors/summernote/dist/summernote.min.js"></script>
    <script src="assets/vendors/owl.carousel/dist/owl.carousel.min.js"></script>
    <script src="assets/vendors/ionrangeslider/js/ion.rangeSlider.min.js"></script>
    <script src="assets/vendors/nestable/jquery.nestable.js"></script>
    <script src="assets/vendors/datatables/media/js/jquery.dataTables.min.js"></script>
    <script src="assets/vendors/datatables/media/js/dataTables.bootstrap4.min.js"></script>
    <script src="assets/vendors/datatables-fixedcolumns/js/dataTables.fixedColumns.js"></script>
    <script src="assets/vendors/datatables-responsive/js/dataTables.responsive.js"></script>
    <script src="assets/vendors/editable-table/mindmup-editabletable.js"></script>
    <script src="assets/vendors/d3/d3.min.js"></script>
    <script src="assets/vendors/c3/c3.min.js"></script>
    <script src="assets/vendors/chartist/dist/chartist.min.js"></script>
    <script src="assets/vendors/peity/jquery.peity.min.js"></script>
    <!-- v1.0.1 -->
    <script src="assets/vendors/chartist-plugin-tooltip/dist/chartist-plugin-tooltip.min.js"></script>
    <!-- v1.1.1 -->
    <script src="assets/vendors/gsap/src/minified/TweenMax.min.js"></script>
    <script src="assets/vendors/hackertyper/hackertyper.js"></script>
    <script src="assets/vendors/jquery-countTo/jquery.countTo.js"></script>
    <!-- v1.4.0 -->
    <script src="assets/vendors/nprogress/nprogress.js"></script>
    <script src="assets/vendors/jquery-steps/build/jquery.steps.min.js"></script>
    <!-- v1.4.2 -->
    <script src="assets/vendors/bootstrap-select/dist/js/bootstrap-select.min.js"></script>
    <script src="assets/vendors/chart.js/src/Chart.bundle.min.js"></script>
    <!-- v1.7.0 -->
    <script src="assets/vendors/dropify/dist/js/dropify.min.js"></script>


    <!-- Angular Version Scripts -->
    <script src="assets/vendors/angular/angular.min.js"></script>
    <script src="assets/vendors/angular-route/angular-route.min.js"></script>
    <script src="assets/common/js/version_angular/app.js"></script>

    <!-- Angular Version Controllers -->
<!--    <script src="pages/register.ctrl.js"></script>
    <script src="pages/login.ctrl.js"></script>
    <script src="pages/lockscreen.ctrl.js"></script>
-->

    <!-- Clean UI Scripts -->
    <script src="assets/common/js/common.js"></script>
    <script src="assets/common/js/demo.temp.js"></script>
	<script src="js/common.js"></script>
	<script src="js/common-sales.js"></script>
	<link rel="stylesheet" type="text/css" href="css/float-modal.css">
</head>
<style>
#packing-list-main-div{
    -webkit-transition: all 1.0s ease;
    -moz-transition: all 1.0s ease;
    -o-transition: all 1.0s ease;
    transition: all 1.0s ease;
}
</style>
<body class="theme-blue menu-top menu-top-compact menu-static colorful-enabled" ng-controller="MainCtrl" onload="fetchLocations();fetchTransporters();">

<nav class="left-menu" left-menu ng-class="{'hidden-left-menu': hideLeftMenu}">
    <div class="logo-container">
        <a href="#" class="logo">
            <img src="assets/common/img/logo.png" alt="AdValoram Clothing" />
            <img class="logo-inverse" src="assets/common/img/logo.png" alt="AdValoram Clothing" />
        </a>
    </div>
    <div class="left-menu-inner scroll-pane">
        <ul class="left-menu-list left-menu-list-root list-unstyled">
            <li class="left-menu-list-submenu">
                <a class="left-menu-link" href="javascript: void(0);">
                    <i class="left-menu-link-icon icmn-cog util-spin-delayed-pseudo"><!-- --></i>
                    <span class="menu-top-hidden">Theme</span>Theme Settings
                </a>
                <ul class="left-menu-list list-unstyled">
                    <li>
                        <div class="left-menu-item">
                            <div class="left-menu-block">
                                <div class="left-menu-block-item">
                                    <small>This menu gives possibility to construct custom blocks with any widgets, components and elements inside, like this theme settings</small>
                                </div>
                                <div class="left-menu-block-item">
                                    <span class="font-weight-600">Theme Style:</span>
                                </div>
                                <div class="left-menu-block-item" id="options-theme">
                                    <div class="btn-group btn-group-justified" data-toggle="buttons">
                                        <div class="btn-group">
                                            <label class="btn btn-default active">
                                                <input type="radio" name="options-theme" value="theme-default" autocomplete="off" checked=""> Light
                                            </label>
                                        </div>
                                        <div class="btn-group">
                                            <label class="btn btn-default">
                                                <input type="radio" name="options-theme" value="theme-dark" autocomplete="off"> Dark
                                            </label>
                                        </div>
                                    </div>
                                    <div class="btn-group btn-group-justified" data-toggle="buttons">
                                        <div class="btn-group">
                                            <label class="btn btn-default">
                                                <input type="radio" name="options-theme" value="theme-green" autocomplete="off"> Green
                                            </label>
                                        </div>
                                        <div class="btn-group">
                                            <label class="btn btn-default">
                                                <input type="radio" name="options-theme" value="theme-blue" autocomplete="off"> Blue
                                            </label>
                                        </div>
                                    </div>
                                    <div class="btn-group btn-group-justified" data-toggle="buttons">
                                        <div class="btn-group">
                                            <label class="btn btn-default">
                                                <input type="radio" name="options-theme" value="theme-red" autocomplete="off"> Red
                                            </label>
                                        </div>
                                        <div class="btn-group">
                                            <label class="btn btn-default">
                                                <input type="radio" name="options-theme" value="theme-orange" autocomplete="off"> Orange
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="left-menu-block-item">
                                    <span class="font-weight-600">Fixed Top Menu</sup>:</span>
                                </div>
                                <div class="left-menu-block-item" id="options-menu">
                                    <div class="btn-group btn-group-justified" data-toggle="buttons">
                                        <div class="btn-group">
                                            <label class="btn btn-default active">
                                                <input type="radio" name="options-menu" value="menu-fixed" checked=""> On
                                            </label>
                                        </div>
                                        <div class="btn-group">
                                            <label class="btn btn-default">
                                                <input type="radio" name="options-menu" value="menu-static"> Off
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="left-menu-block-item">
                                    <span class="font-weight-600">Super Clean Mode:</span>
                                </div>
                                <div class="left-menu-block-item" id="options-mode">
                                    <div class="btn-group btn-group-justified" data-toggle="buttons">
                                        <div class="btn-group">
                                            <label class="btn btn-default">
                                                <input type="radio" name="options-mode" value="mode-superclean"> On
                                            </label>
                                        </div>
                                        <div class="btn-group">
                                            <label class="btn btn-default active">
                                                <input type="radio" name="options-mode" value="mode-default" checked=""> Off
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="left-menu-block-item">
                                    <span class="font-weight-600">Colorful Menu:</span>
                                </div>
                                <div class="left-menu-block-item" id="options-colorful">
                                    <div class="btn-group btn-group-justified" data-toggle="buttons">
                                        <div class="btn-group">
                                            <label class="btn btn-default active">
                                                <input type="radio" name="options-colorful" value="colorful-enabled" checked=""> On
                                            </label>
                                        </div>
                                        <div class="btn-group">
                                            <label class="btn btn-default">
                                                <input type="radio" name="options-colorful" value="colorful-disabled"> Off
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="left-menu-block-item">
                                    <span class="font-weight-600">Menu Shadow:</span>
                                </div>
                                <div class="left-menu-block-item" id="mode-box-shadow">
                                    <div class="btn-group btn-group-justified" data-toggle="buttons">
                                        <div class="btn-group">
                                            <label class="btn btn-default">
                                                <input type="radio" name="mode-box-shadow" value="mode-box-shadow"> On
                                            </label>
                                        </div>
                                        <div class="btn-group">
                                            <label class="btn btn-default active">
                                                <input type="radio" name="mode-box-shadow" value="mode-box-shadow-disabled" checked=""> Off
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="left-menu-block-item">
                                    <span class="font-weight-600">Squared Corners:</span>
                                </div>
                                <div class="left-menu-block-item" id="mode-squared">
                                    <div class="btn-group btn-group-justified" data-toggle="buttons">
                                        <div class="btn-group">
                                            <label class="btn btn-default">
                                                <input type="radio" name="mode-squared" value="mode-squared"> On
                                            </label>
                                        </div>
                                        <div class="btn-group">
                                            <label class="btn btn-default active">
                                                <input type="radio" name="mode-squared" value="mode-squared-disabled" checked=""> Off
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                </ul>
            </li>

            
            <li>
                <a class="left-menu-link" href="home.html">
                    <i class="left-menu-link-icon icmn-home2"></i>
                    Home
                </a>
            </li>

            <li class="left-menu-list-separator"><!-- --></li>
            <li class="left-menu-list-submenu">
                <a class="left-menu-link" href="javascript: void(0);">
                    <i class="left-menu-link-icon icmn-files-empty2"><!-- --></i>
                    Dashboard
                </a>
                <ul class="left-menu-list list-unstyled">
                    <li>
                        <a class="left-menu-link" href="#">
                            Sales
                        </a>
                    </li>
                    <li>
                        <a class="left-menu-link" href="#">
                            Purchase
                        </a>
                    </li>
                </ul>
            </li>
			<li class="left-menu-list-separator"><!-- --></li>
            <li>
                <a class="left-menu-link" href="#">
                    <i class="left-menu-link-icon icmn-profile"><!-- --></i>
                    Purchase
                </a>
            </li>
			<li class="left-menu-list-separator"><!-- --></li>
            <li>
                <a class="left-menu-link" href="#">
                    <i class="left-menu-link-icon icmn-profile"><!-- --></i>
                    Inventory
                </a>
            </li>
			<li class="left-menu-list-separator"><!-- --></li>
            <li>
                <a class="left-menu-link" href="#">
                    <i class="left-menu-link-icon icmn-profile"><!-- --></i>
                    Sales
                </a>
            </li>
			<li class="left-menu-list-separator"><!-- --></li>
            <li>
                <a class="left-menu-link" href="barcode-printing.html">
                    <i class="left-menu-link-icon icmn-profile"><!-- --></i>
                    Barcode Printing
                </a>
            </li>
            <li class="left-menu-list-separator"><!-- --></li>
            <li>
                <a class="left-menu-link" href="#">
                    <i class="left-menu-link-icon icmn-profile"><!-- --></i>
                    Create
                </a>
            </li>
			<li class="left-menu-list-separator"><!-- --></li>
            <li>
                <a class="left-menu-link" href="#">
                    <i class="left-menu-link-icon icmn-profile"><!-- --></i>
                    Settings
                </a>
            </li>
            <li>
                <a class="left-menu-link" href="#">
                    <i class="left-menu-link-icon icmn-bubbles5"><!-- --></i>
                    Help
                </a>
            </li>
            <li>
                <a class="left-menu-link" href="#">
                    <i class="left-menu-link-icon icmn-mail2"><!-- --></i>
                    Support
                </a>
            </li>
            <li class="left-menu-list-separator"><!-- --></li>
            <li>
                <a class="left-menu-link" onclick="sendSignoutRequest();" href="#">
                    <i class="left-menu-link-icon icmn-profile"><!-- --></i>
                    Sign Out
                </a>
            </li>
        </ul>
    </div>
</nav>
<nav class="top-menu" ng-class="{'hidden-top-menu': hideTopMenu}">
    <div class="menu-icon-container hidden-md-up">
        <div class="animate-menu-button left-menu-toggle">
            <div><!-- --></div>
        </div>
    </div>
    <div class="menu">
        <div class="menu-user-block">
            <div class="dropdown dropdown-avatar">
                <a href="javascript: void(0);" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                    <span class="avatar" href="javascript:void(0);">
                        <img src="../assets/common/img/temp/avatars/1.jpg" alt="Alternative text to the image">
                    </span>
                </a>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="" role="menu">
                    <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-user"></i> Profile</a>
                    <div class="dropdown-divider"></div>
                    <div class="dropdown-header">Home</div>
                    <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-circle-right"></i> System Dashboard</a>
                    <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-circle-right"></i> User Boards</a>
                    <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-circle-right"></i> Issue Navigator (35 New)</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-exit"></i> Logout</a>
                </ul>
            </div>
        </div>
        <div class="menu-user-block menu-notifications">
            <div class="dropdown dropdown-avatar">
                <a href="javascript: void(0);" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                    <i class="menu-notification-icon icmn-bubbles7"></i>
                </a>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="" role="menu">
                    <div class="notification-block">
                        <div class="item">
                            <i class="notification-icon icmn-star-full"></i>
                            <div class="inner">
                                <div class="title">
                                    <span class="pull-right">now</span>
                                    <a href="javascript: void(0);">Update Status: <span class="label label-danger font-weight-700">New</span></a>
                                </div>
                                <div class="descr">
                                    Failed to get available update data. To ensure the proper functioning of your application, update now.
                                </div>
                            </div>
                        </div>
                        <div class="item">
                            <i class="notification-icon icmn-stack3"></i>
                            <div class="inner">
                                <div class="title">
                                    <span class="pull-right">24 min ago</span>
                                    <a href="javascript: void(0);">Income: <span class="label label-default font-weight-700">$299.00</span></a>
                                </div>
                                <div class="descr">
                                    Failed to get available update data. To ensure the proper functioning of your application, update now.
                                </div>
                            </div>
                        </div>
                        <div class="item">
                            <i class="notification-icon icmn-bubbles5"></i>
                            <div class="inner">
                                <div class="title">
                                    <span class="pull-right">30 min ago</span>
                                    <a href="javascript: void(0);">Inbox Message</a>
                                </div>
                                <div class="descr">
                                    From: <a href="javascript: void(0);">David Bowie</a>
                                </div>
                            </div>
                        </div>
                        <div class="item">
                            <i class="notification-icon icmn-pie-chart2"></i>
                            <div class="inner">
                                <div class="title">
                                    <span class="pull-right">now</span>
                                    <a href="javascript: void(0);">Update Status: <span class="label label-primary font-weight-700">New</span></a>
                                </div>
                                <div class="descr">
                                    Failed to get available update data. To ensure the proper functioning of your application, update now.
                                </div>
                            </div>
                        </div>
                        <div class="item">
                            <i class="notification-icon icmn-books"></i>
                            <div class="inner">
                                <div class="title">
                                    <span class="pull-right">24 min ago</span>
                                    <a href="javascript: void(0);">Income: <span class="label label-warning font-weight-700">$299.00</span></a>
                                </div>
                                <div class="descr">
                                    Failed to get available update data. To ensure the proper functioning of your application, update now.
                                </div>
                            </div>
                        </div>
                        <div class="item">
                            <i class="notification-icon icmn-cog util-spin-delayed-pseudo"></i>
                            <div class="inner">
                                <div class="title">
                                    <span class="pull-right">30 min ago</span>
                                    <a href="javascript: void(0);">Inbox Message</a>
                                </div>
                                <div class="descr">
                                    From: <a href="javascript: void(0);">David Bowie</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </ul>
            </div>
        </div>
        <div class="menu-info-block">
            <div class="left">
                <div class="header-buttons">
                    <div class="dropdown">
                        <a href="javascript: void(0);" class="dropdown-toggle dropdown-inline-button" data-toggle="dropdown" aria-expanded="false">
                            <i class="dropdown-inline-button-icon icmn-folder-open"></i>
                            <span class="hidden-lg-down">Issues History</span>
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="" role="menu">
                            <a class="dropdown-item" href="javascript:void(0)">Current search</a>
                            <a class="dropdown-item" href="javascript:void(0)">Search for issues</a>
                            <div class="dropdown-divider"></div>
                            <div class="dropdown-header">Opened</div>
                            <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-checkmark"></i> CLNUI-253 Project implemen...</a>
                            <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-checkmark"></i> CLNUI-234 Active history iss...</a>
                            <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-clock"></i> CLNUI-424 Ionicons intergrat...</a>
                            <a class="dropdown-item" href="javascript:void(0)">More...</a>
                            <div class="dropdown-divider"></div>
                            <div class="dropdown-header">Filters</div>
                            <a class="dropdown-item" href="javascript:void(0)">My open issues</a>
                            <a class="dropdown-item" href="javascript:void(0)">Reported by me</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="javascript:void(0)">Import issues from CSV</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-cog"></i> Settings</a>
                        </ul>
                    </div>
                    <div class="dropdown">
                        <a href="javascript: void(0);" class="dropdown-toggle dropdown-inline-button" data-toggle="dropdown" aria-expanded="false">
                            <i class="dropdown-inline-button-icon icmn-database"></i>
                            <span class="hidden-lg-down">Dashboards</span>
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="" role="menu">
                            <div class="dropdown-header">Active</div>
                            <a class="dropdown-item" href="javascript:void(0)">Project Management</a>
                            <a class="dropdown-item" href="javascript:void(0)">User Inetrface Development</a>
                            <a class="dropdown-item" href="javascript:void(0)">Documentation</a>
                            <div class="dropdown-header">Inactive</div>
                            <a class="dropdown-item" href="javascript:void(0)">Marketing</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-cog"></i> Settings</a>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="left hidden-md-down">
                <div class="example-top-menu-chart">
                    <span class="title">Income:</span>
                    <span class="chart" id="topMenuChart" style="display: none;">1,5,1,7,5,6,6,1,4,7</span><svg class="peity" height="22" width="44"><rect fill="#01a8fe" x="0.44000000000000006" y="18.857142857142858" width="3.52" height="3.1428571428571423"></rect><rect fill="#01a8fe" x="4.840000000000001" y="6.285714285714285" width="3.5199999999999987" height="15.714285714285715"></rect><rect fill="#01a8fe" x="9.24" y="18.857142857142858" width="3.5199999999999996" height="3.1428571428571423"></rect><rect fill="#01a8fe" x="13.64" y="0" width="3.5199999999999996" height="22"></rect><rect fill="#01a8fe" x="18.04" y="6.285714285714285" width="3.520000000000003" height="15.714285714285715"></rect><rect fill="#01a8fe" x="22.439999999999998" y="3.1428571428571423" width="3.520000000000003" height="18.857142857142858"></rect><rect fill="#01a8fe" x="26.839999999999996" y="3.1428571428571423" width="3.5200000000000067" height="18.857142857142858"></rect><rect fill="#01a8fe" x="31.24" y="18.857142857142858" width="3.5200000000000067" height="3.1428571428571423"></rect><rect fill="#01a8fe" x="35.64" y="9.428571428571429" width="3.520000000000003" height="12.571428571428571"></rect><rect fill="#01a8fe" x="40.04" y="0" width="3.520000000000003" height="22"></rect></svg>
                    <span class="count">425.00 USD</span>

                    <!-- Top Menu Chart Script -->
                    <script>
                        $(function () {

                            var topMenuChart = $("#topMenuChart").peity("bar", {
                                fill: ['#01a8fe'],
                                height: 22,
                                width: 44
                            });

                            setInterval(function() {
                                var random = Math.round(Math.random() * 10);
                                var values = topMenuChart.text().split(",");
                                values.shift();
                                values.push(random);
                                topMenuChart.text(values.join(",")).change()
                            }, 1000);

                        });
                    </script>
                    <!-- Top Menu Chart Script -->
                </div>
            </div>
            <div class="right hidden-lg-down margin-left-20">
                <div class="search-block">
                    <div class="form-input-icon form-input-icon-right">
                        <i class="icmn-search"></i>
                        <input class="form-control form-control-sm form-control-rounded" placeholder="Search..." type="text">
                        <button type="submit" class="search-block-submit "></button>
                    </div>
                </div>
            </div>
            
        </div>
    </div>
</nav>

<div id="addProductModal" class="modal-outer-body">

  <!-- Modal content -->
  <div class="modal-content">
    <div class="modal-header">
      <span class="close">&times;</span>
		<h3 style="padding:5px;font-size:15px;">Add Product</h3>
    </div>
    <div class="modal-body">
		<div class="modal-left-body">
			<table class="tg">
			  <tr>
				<th class="tg-yw4l"><span>ID</span></th>
				<th class="tg-yw4l"><span>Style Code</span></th>
				<th class="tg-yw4l postServerRequest"><span>Color Code</span></th>
				<th class="tg-yw4l postServerRequest"><span>Gender</span></th>
				<th class="tg-yw4l postServerRequest"><span>MRP</span></th>
			  </tr>
			  <tr>
				<td class="tg-yw42"><div class="form-group"><span id = "productId">1</span></div></td>
				<td class="tg-yw42">
					<div class="form-group">
						<input class="form-control" id = "productStyleCodes" type="search" list="styleCodes" placeholder="Select Style Code">
					</div>

					<datalist id="styleCodes">
					</datalist>
				</td>
				<td class="tg-yw42 postServerRequest">
					<div class="form-group">
						<select class="form-control" id = "dropDownColorCode">
						</select>
					</div>
				</td>
				<td class="tg-yw42 postServerRequest">
					<div class="form-group">
						<select class="form-control" id = "dropDownGender">
						</select>
					</div>
				</td>
				<td class="tg-yw42 postServerRequest">
					<div class="form-group">
						<input class="form-control" type = "text" id = "textMrp" onkeypress='return event.charCode >= 48 && event.charCode <= 57' maxlength = "4" readonly>
					</div>
				</td>
			  </tr>
			
			<tr class = "postServerRequest">
				<th class="tg-yw4l"><span>Size </span></th>
				<th class="tg-yw4l"><span>EAN Code</span></th>
				<th class="tg-yw4l"><span>Order Quantity</span></th>
			</tr>

			<tbody id = "sizeTable" class = "postServerRequest">
				
			</tbody>

			</table>
		</div>
		
		<div class="modal-right-body postServerRequest">
			<div class = "modal-right-body-bottom">
				<button id="buttonSaveEntryAndClose" style = "width:150px;height:40px; margin-bottom:5px;" class="btn btn Primary" onclick = "saveProductAndClose()">Save & Close</button></br>
				<button id="buttonSaveEntryAndGotoNext" style = "width:150px;height:40px; margin-top:5px;" class="btn btn Primary" onclick = "saveProductAndGoToNext()">Save & Add New</button>
			</div>
		</div>
    </div>
    <div class="modal-footer">
		<span id="numberOfPrintCopies" style="float:left;color:#000000;padding:7px 40px 0px 35px;font-size:13px;"></span>
      <!--<button id="closeBarCodeModal" onclick="closeBarCodeModal()">Close</button>-->
    </div>
  </div>

</div>

<section class = "page-content">
<div class="page-content-inner">

    <section class="row">
        <div class="col-lg-12" id = "packing-list-main-div">
            <section class="panel" style="overflow:auto">
                <div class="panel-heading">
					<h2>
						<div class="dropdown pull-right">
							<button id = "buttonAddProduct" type="button" class="btn btn-primary"  onclick = "addProduct();"  style = "display:none">
								Add Product
							</button>
							</div>
						<span id = "pageTitle">Create New Packing List</span>
					</h2>
				</div>
				<div class="panel-body">
			<div class="nav-tabs-horizontal" id = "homeTabs">
				<script>
				$(document).ready(function(){

						//$('#get-next-tab').click(function(e){
						//	e.preventDefault();					  
						//	$('#main-tabs a[href='+next_tab+']').tab('show');
						//});
						
						$('#tab-billing-details').click(function(){
							/*$('#buttonAddProduct').hide();
							$("#packing-list-main-div").attr("class", "col-lg-12");
							$("#packing-list-inv-disp").hide();*/
							tabFunction(0);
						});

						$('#tab-add-product').click(function(){
							/*$('#buttonAddProduct').show();
							$("#packing-list-main-div").attr("class", "col-lg-8");
							$("#packing-list-inv-disp").attr("class", "col-lg-4");
							$("#packing-list-inv-disp").show(1200);*/
							tabFunction(1);
						});

						$('#tab-uploads').click(function(){
							/*$('#buttonAddProduct').hide();
							$("#packing-list-main-div").attr("class", "col-lg-12");
							$("#packing-list-inv-disp").hide(500);*/
							tabFunction(2);
						});

				});
				</script>
				<ul class="nav nav-tabs" role="tablist">
					<li class="nav-item" id = "tab-billing-details">
						<a id = "0" class="nav-link active" href="javascript: void(0);" data-toggle="tab" data-target="#tab1" role="tab" aria-expanded="false">Billing Details</a>
					</li>
					<li class="nav-item" id = "tab-add-product">
						<a id = "1" class="nav-link" href="javascript: void(0);" data-toggle="tab" data-target="#tab2" role="tab" aria-expanded="true">Add Product</a>
					</li>
					<li class="nav-item" id = "tab-uploads">
						<a id = "2" class="nav-link" href="javascript: void(0);" data-toggle="tab" data-target="#tab3" role="tab" aria-expanded="true">Uploads</a>
					</li>
				</ul>
				<div id = "form-validation" class="tab-content padding-vertical-20">
					<div class="tab-pane active" id="tab1" role="tabpanel" aria-expanded="false">
						
						<div class = "col-lg-5">
						<div class="form-group">
                                <label for="linkedSalesOrderId">Sales Order ID</label>
                                <input class="form-control" id="linkedSalesOrderId" type="text" readonly>
                        </div>
						<div class="form-group">
                                <label for="packingListId">Packing List ID</label>
                                <input class="form-control" id="packingListId" type="text" readonly>
                            </div>
							<div class="form-group">
                                <label for="purchaseOrderReference">Purchase Order Reference</label>
                                <input class="form-control" id="purchaseOrderReference" type="text">
                            </div>
						</div>
						
						
						<div class = "col-lg-5" style="padding-left:100px;">
							<div class = "row">	
								<div class = "col-lg-6">	
									<div class="form-group">
										<label for="packingListRevisionNumber">Packing List Revision Number</label>
										<input class="form-control" id="packingListRevisionNumber" type="text" value="0" readonly>
									</div>
								</div>
								<div class = "col-lg-6">	
									<div class="form-group">
										<label for="packingListDate">Packing List Date</label>
										<input class="form-control" id="packingListDate" type="text" readonly>
									</div>
								</div>
							</div>
							
							<div class="form-group">
                                <label for="clientName">Client Name</label>
								<select class="form-control" id="clientName" name="validation[city name]"
																					   data-validation="[L>=1]"
																					   data-validation-message="Please select $">
								</select>
                            </div>
							
						</div>
					</div>
					<div class="tab-pane" id="tab2" role="tabpanel" aria-expanded="true">
						<div class = "col-lg-12">
						<div id = "productErrorDiv" style = "display:none"><span id = "colorError" style="color:#FF0000; margin:20px;">Please add atleast 1 product</span></br></br></div>
							<div class="form-group" >
								<label class="form-control-label" for="productSize">Sizes</label>
                                <input id="productSize28" name = "productSize" type="checkbox" value="28" style="margin:10px" checked onclick = "toggleColumnVisibility(4, this)">28
								<input id="productSize30" name = "productSize" type="checkbox" value="30" style="margin:10px" checked onclick = "toggleColumnVisibility(5, this)">30
								<input id="productSize32" name = "productSize" type="checkbox" value="32" style="margin:10px" checked onclick = "toggleColumnVisibility(6, this)">32
								<input id="productSize34" name = "productSize" type="checkbox" value="34" style="margin:10px" checked onclick = "toggleColumnVisibility(7, this)">34
								<input id="productSize36" name = "productSize" type="checkbox" value="36" style="margin:10px" checked onclick = "toggleColumnVisibility(8, this)">36
								<input id="productSize38" name = "productSize" type="checkbox" value="38" style="margin:10px" checked onclick = "toggleColumnVisibility(9, this)">38
								<input id="productSize40" name = "productSize" type="checkbox" value="40" style="margin:10px" checked onclick = "toggleColumnVisibility(10, this)">40
								<input id="productSize42" name = "productSize" type="checkbox" value="42" style="margin:10px" checked onclick = "toggleColumnVisibility(11, this)">42
								<input id="productSize44" name = "productSize" type="checkbox" value="44" style="margin:10px" checked onclick = "toggleColumnVisibility(12, this)">44
								<input id="productSize46" name = "productSize" type="checkbox" value="46" style="margin:10px" checked onclick = "toggleColumnVisibility(13, this)">46
								<input id="productSize48" name = "productSize" type="checkbox" value="48" style="margin:10px" checked onclick = "toggleColumnVisibility(14, this)">48
                            </div>
							<script>
							$(document).ready(function () {
								dataTable = $('#productsTable').DataTable();
							});
							function toggleColumnVisibility(index, element){								
								 // Get the column API object
								var column = dataTable.column(index);		 
								// Toggle the visibility
								//column.visible(!column.visible());
								column.visible(element.checked);
							}
							
							</script>

						</div>
						<div class = "col-lg-12">
							<table class="table table-hover nowrap" id="productsTable" width="100%">
								<thead class="thead-default">
									<tr>
										<th rowspan = "2">Product No.</th>
										<th rowspan = "2">Style Code</th>
										<th rowspan = "2">Color Code</th>					
										<th rowspan = "2">Gender</th>
										<th colspan = "11">
											&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
											&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
											&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
										Size
										</th>
										<th rowspan = "2">Action</th>
									</tr>
									<tr>
										<th>28</th>
										<th>30</th>
										<th>32</th>
										<th>34</th>
										<th>36</th>
										<th>38</th>
										<th>40</th>
										<th>42</th>
										<th>44</th>
										<th>46</th>
										<th>48</th>
									</tr>
								</thead>
								<tfoot>
																<tr>
										<th rowspan = "2">Product No.</th>
										<th rowspan = "2">Style Code</th>
										<th rowspan = "2">Color Code</th>					
										<th rowspan = "2">Gender</th>
										<th colspan = "11">
											&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
											&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
											&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
										Size
										</th>
										<th rowspan = "2">Action</th>
									</tr>
									<tr>
										<th>28</th>
										<th>30</th>
										<th>32</th>
										<th>34</th>
										<th>36</th>
										<th>38</th>
										<th>40</th>
										<th>42</th>
										<th>44</th>
										<th>46</th>
										<th>48</th>
									</tr>
								</tfoot>
									<tbody id = 'productsTableBody'>
								</tbody>
							</table>
						</div>
					</div>
					<div class="tab-pane" id="tab3" role="tabpanel" aria-expanded="true">
						<div class = "col-lg-10">
							<div class="form-group">
								<label class="form-control-label" for="notes">Notes</label>
								<textarea class="form-control" rows="7" id="notes"></textarea>
							</div>
							
							<div class="form-group">
								<label class="form-control-label" for="uploadDocuments">Upload Documents</label>
								<input id="uploadDocuments" type="file">
								<br>
								<div id="uploadedFiles"></div>
							</div>
							
						</div>
					</div>

					<div class="form-group" >
						<div class="col-md-9" style="padding-bottom:20px;">
							<button type="submit" class="btn width-150 btn-primary" style="margin:10px" id = "btnSave" onclick="createPackingList()">Save</button>
							<button type="button" class="btn width-150 btn-default" id = "btnBack" style="margin:10px">Back</button>
							<button type="button" class="btn width-150 btn-default" id = "btnNext" style="margin:10px">Next</button>
							<button type="button" class="btn width-150 btn-default" style="margin:10px" onclick = "goBackToLandingPage();">Cancel</button>
							<button type="button" class="btn width-150 btn-default" id = "btnPreview" style="margin:10px; background-color:#5dc698; border-color:#5dc698; display:none" onclick = "showPreview();">Preview</button>
						</div>
                    </div>
				</div>
			</div>

		</div>
            </section>
        </div>
        <div class="col-lg-4" id = "packing-list-inv-disp" style = "display:none">
            <section class="panel">
                <div class="panel-heading">
                    <h3>Inventory</h3>
                </div>
						<div class="panel-body">
                    		<div class = "col-lg-12">
							<table class="table table-hover nowrap" id="productsTable" width="100%">
								<thead class="thead-default">
										<tr>
											<th>Sizes</th>
											<th>Order</th>
											<th>Available</th>					
											<th>Issue</th>
											<th>Balance</th>
										</tr>
									</thead>
									<tfoot>
										<tr>
											<th>Sizes</th>
											<th>Order</th>
											<th>Available</th>					
											<th>Issue</th>
											<th>Balance</th>
										</tr>
									</tfoot>
										<tbody id = 'colorCodesTableBody'>
									</tbody>
								</table>
							</div>
					</div>
                <div class="panel-footer">
                    <span>.</span>
                </div>
            </section>
        </div>
    </section>
</div>
   
<div id="deleteFileModal" class="modal-outer-body">

  <!-- Modal content -->
  <div class="modal-content">
    <div class="modal-header">
      <span class="close">&times;</span>
		<h3 style="padding:5px;font-size:15px;">Delete File ?</h3>
    </div>
    <div class="modal-body">
		<span id = "confirmDeleteText">Are you sure you want to delete this File ?</span>	
    </div>
    <div class="modal-footer" style="height:70px;">
		<table>
		<tr>
			<td><button id="buttonConfirmDelete" style = "width:150px;height:40px;display:inline;" class="btn btn Primary">Yes</button></br></td>
			<td><button id="buttonCancel" style = "width:150px;height:40px;display:inline;" class="btn btn Primary" onclick = "closeDeleteFileModal()">Cancel</button></td>
		</tr>
		</table>
    </div>
  </div>

</div>	
	
	
</div>	
</section>

<div id="salesOrderExhaustedDialog" class="modal-outer-body">
  <!-- Modal content -->
  <div class="modal-content">
    <div class="modal-header">
		<h3 style="padding:5px;font-size:15px;">Sales Order Exhausted</h3>
    </div>
    <div class="modal-body">
		<span>Packing Lists for all quantities for this Sales Order has been generated.</span>	
    </div>
    <div class="modal-footer" style="height:70px;">
		<table>
		<tr>
			<td><button id="buttonRedirectToSalesOrderLanding" style = "width:150px;height:40px;display:inline;" class="btn btn Primary">OK</button></td>
		</tr>
		</table>
    </div>
  </div>

</div>
<script>
	function changeClass(){
		document.getElementById('main-body').className  = 'panel panel-with-borders';
		document.getElementById('sidebar').style.display = "none" ;
	}
</script>

<script>
	function showDeleteFileDialog(fileId, objectId) {
		document.getElementById('deleteFileModal').style.display = "block";
		document.getElementById('buttonConfirmDelete').onclick = function (){
				var request = new XMLHttpRequest();
				NProgress.start();
				request.onreadystatechange = function(){
					NProgress.inc();
					if(request.readyState == 4){
						var response = JSON.parse(request.response);
						if(request.status == 200){
							if(response.result == "success"){
								window.location = "packing-list.html?packingListId=" + getParameterByName('packingListId'); //refresh
							} else {
								//show error dialog box
								document.getElementById('errorWhileDeletingModal').style.display = "block";
								document.getElementById('buttonCloseErrorWhileDeletingModal').onclick = function (){
									document.getElementById('errorWhileDeletingModal').style.display = "none";
								}
							}
						} else {
							window.location = "index.html";
						}
						NProgress.done();
					}
				};
				
				request.open ("DELETE", base_url + "/AdValoramAdmin/upload/packingList/"+objectId+"/"+fileId, true);
				request.setRequestHeader("Authorization", "Bearer " + localStorage.getItem("token"));
				request.send();
		}
	}

	function closeDeleteFileModal(){
		document.getElementById('deleteFileModal').style.display = 'none';
	}
	
	// Get the modal
	var modal = document.getElementById('deleteFileModal');
	// Get the <span> element that closes the modal
	var span = document.getElementsByClassName("close")[0];

	// When the user clicks on <span> (x), close the modal
	span.onclick = function() {
		modal.style.display = "none";
	}

	function tabFunction(tabId){
		if(tabId == 0){
			$("#packing-list-main-div").attr("class", "col-lg-12");
			$("#packing-list-inv-disp").hide();
		} else if(tabId == 1){
			$('#buttonAddProduct').show();
			$("#packing-list-main-div").attr("class", "col-lg-8");
			$("#packing-list-inv-disp").attr("class", "col-lg-4");
			$("#packing-list-inv-disp").show(1200);
		} else if(tabId == 2){
			$('#buttonAddProduct').hide();
			$("#packing-list-main-div").attr("class", "col-lg-12");
			$("#packing-list-inv-disp").hide(500);
		}
	}
	
	function goBackToLandingPage(){
		window.location = "landing-packing-list.html";
	}
	
	var balanceQuantityForCurrentPackingList = {};
	var salesOrderId = -1;
	var linkedSalesOrderInternalId = -1;
	//packing list ID = sales order ID
	$(window).load(function() {
		document.getElementById('packingListDate').value = print_today();		
		//retrieve corresponding sales order
		if(getParameterByName('salesOrderId')!=null 
			|| getParameterByName('packingListId')!=null){
			NProgress.start();
			document.getElementById('buttonAddProduct').style.display = "none";
			document.getElementById('buttonAddProduct').disabled = true;
			
			salesOrderId = getParameterByName('salesOrderId');			
			packingListId = getParameterByName('packingListId');
			
			var url;
			if(salesOrderId!=null){
				url = base_url + "/AdValoramAdmin/salesOrder/"+salesOrderId + "/linkedPackingLists";
			} else if(packingListId!=null){
				url = base_url + "/AdValoramAdmin/packingList/"+packingListId + "/linkedSalesOrder";
				document.getElementById("pageTitle").innerHTML = "Edit Packing List"
			}
			$.getJSON(url, function(data){
			var result = data.result;
			if(result!='error'){
				var salesOrder = result;
				salesOrderId = salesOrder.salesOrderId;
				if(salesOrder.salesOrderId < 0){
					processUnlinkedPackingList(salesOrder.packingList);
					NProgress.done();
					return;
				}
				if(salesOrder.status == "OPEN"){
					window.location = "sales-order.html?id=" + salesOrderId;
				} 
				linkedSalesOrderInternalId = salesOrder.id;
				document.getElementById('linkedSalesOrderId').value = salesOrder.salesOrderId;
				document.getElementById('purchaseOrderReference').value = salesOrder.purchaseOrderReference;				
				document.getElementById("purchaseOrderReference").readOnly = true;

				var waitToSelectClient = setInterval(function(){
					if(customerArray!=null){
						var clientName = document.getElementById("clientName");
						for(var i = 0; i < clientName.length; i++){
							if(clientName.options[i].value == salesOrder.linkedCustomer.id){
								clientName.selectedIndex = i;
								clientName.disabled = true;
								clearInterval(waitToSelectClient);
								break;
							}
						}
					}
				}, 100);
				
				NProgress.inc();
				//entry
				var entries = salesOrder.entry;
				var minSize = 999;
				var maxSize = -1;
				//var salesOrderEntries = [];
				var salesOrderEntries = {};
				
				var sizeArray = [];
				for(var s = 0; s < entries.length; s++){
					var entryJson = entries[s];
					var size = parseInt(entryJson.stockKeepingUnit.sizeCode.sizeCode);
					if(size < minSize){
						minSize = size;
					}
					if(size > maxSize){
						maxSize = size;
					}
					if(sizeArray.indexOf(size) == -1){
						sizeArray.push(size);
					}

					var entryId = entryJson.entryId;
					//var salesOrderEntry = salesOrderEntries[entryId - 1];
					var salesOrderEntry = salesOrderEntries[entryId];
					var balanceForCurrentEntry = balanceQuantityForCurrentPackingList[entryId];
					if(salesOrderEntry == null){
						salesOrderEntry = new Object();
						salesOrderEntry.id = entryJson.entryId;
						salesOrderEntry.styleCode = entryJson.stockKeepingUnit.styleCode;
						salesOrderEntry.mrp = entryJson.stockKeepingUnit.mrp;
						salesOrderEntry.gender = entryJson.stockKeepingUnit.genderCode.gender;
						salesOrderEntry.genderCode = entryJson.stockKeepingUnit.genderCode.genderCode;
						salesOrderEntry.colorCode = entryJson.stockKeepingUnit.colorCode.colorCode;
						salesOrderEntries[salesOrderEntry.id] = salesOrderEntry;
						balanceForCurrentEntry = {};
						balanceQuantityForCurrentPackingList[salesOrderEntry.id] = balanceForCurrentEntry;	//contains sales order entries initially
					} else {
						//compare
						if(salesOrderEntry.styleCode != entryJson.stockKeepingUnit.styleCode){
							console.log("ERROR. Color code does not match " + entryJson.entryId);
							return;
						}
						if(salesOrderEntry.gender != entryJson.stockKeepingUnit.genderCode.gender){
							console.log("ERROR. genderCode does not match " + entryJson.entryId);
							return;
						}
						if(salesOrderEntry.colorCode != entryJson.stockKeepingUnit.colorCode.colorCode){
							console.log("ERROR. colorCode does not match " + entryJson.entryId);
							return;
						}
						if(salesOrderEntry.mrp != entryJson.stockKeepingUnit.mrp){
							console.log("ERROR. mrp does not match " + entryJson.entryId);
							return;
						}
					}
					
					var key = "quantityForSize" + size;
					salesOrderEntry[key] = entryJson.quantity;
					balanceForCurrentEntry[key] = entryJson.quantity;
				}
				
				for(var s = 28; s <= 48; s=s+2){
					document.getElementById('productSize'+s).checked = false;
					document.getElementById('productSize'+s).disabled = true;
				}
				
				for(var s = 0; s < sizeArray.length; s++){
					document.getElementById('productSize'+sizeArray[s]).checked = true;
				}
				
				var sorted_keys = Object.keys(salesOrderEntries).sort();
				for(var p = 0; p < sorted_keys.length; p++){
					var salesOrderEntry = salesOrderEntries[sorted_keys[p]];
					productList.push(salesOrderEntry);			//contains sales order entries initially
				}
				
				//check out existing entries in packing list. Substract from corresponding entries in Sales Order to find balance quantity
				/**
				Balance Quantity 
				*/
				var linkedPackingListsJson = salesOrder.linkedPackingLists;
				var linkedPackingLists= [];
				for(var p = 0; p < linkedPackingListsJson.length; p++){
					var packingListJson = linkedPackingListsJson[p];
					if(parseInt(packingListId) == packingListJson.packingListId){
						document.getElementById("packingListRevisionNumber").value = "R"+packingListJson.packingListRevisionNumber;
						document.getElementById("packingListId").value = packingListJson.packingListId;
						document.getElementById('notes').value = packingListJson.notes;
						if(packingListJson.status == "OPEN" || packingListJson.status == "CONFIRMED" || packingListJson.status == "UNDER_REVISION"){
							$('#btnPreview').show();
						} else {
							$('#btnPreview').hide();
						}
						var fileDetailsArray = packingListJson.associatedFiles;
						var uploadedFiles = document.getElementById('uploadedFiles');
						var str = "";
						for(var f = 0; f < fileDetailsArray.length; f++){
							str+="<div style='border:1px solid #ccc;padding:10px;margin-top:5px;border-radius: 5px;'>";
							var fileJson = fileDetailsArray[f];
							str+="<a href='" + fileJson.fileLocation + "'>" + fileJson.name + "</a>";
							str+="<i class='fa fa-trash fa-2x' onclick='showDeleteFileDialog("+fileJson.id+","+packingListJson.id+")' style='float:right;padding:2px;margin:-4px;' aria-hidden='true'></i></div>"
						}
					
						uploadedFiles.innerHTML = str;
					}
					
					var linkedPackingList = new Object();
					linkedPackingLists.push(linkedPackingList);
					
					linkedPackingList.packingListId = packingListJson.packingListId;
					linkedPackingList.clientNameOnPackingListDate = packingListJson.clientNameOnPackingListDate;
					
					linkedPackingList[packingListJson.packingListId] = linkedPackingList;
					
					var packingListEntryJson = packingListJson.entry;
					var packingListEntries = [];
					linkedPackingList.packingListEntries = packingListEntries;
					
					//packing list entries start
					for(var s = 0; s < packingListEntryJson.length; s++){
						var entryJson = packingListEntryJson[s];
						var size = parseInt(entryJson.stockKeepingUnit.sizeCode.sizeCode);

						var entryId = entryJson.entryId;
						var packingListEntry = packingListEntries[entryId];
						if(packingListEntry == null){
							packingListEntry = new Object();
							packingListEntry.id = entryJson.entryId;
							packingListEntry.styleCode = entryJson.stockKeepingUnit.styleCode;
							packingListEntry.mrp = entryJson.stockKeepingUnit.mrp;
							packingListEntry.gender = entryJson.stockKeepingUnit.genderCode.gender;
							packingListEntry.genderCode = entryJson.stockKeepingUnit.genderCode.genderCode;
							packingListEntry.colorCode = entryJson.stockKeepingUnit.colorCode.colorCode;
							packingListEntries[packingListEntry.id] = packingListEntry;
						} else {
							//compare
							if(packingListEntry.styleCode != entryJson.stockKeepingUnit.styleCode){
								console.log("ERROR. Color code does not match " + entryJson.entryId);
								return;
							}
							if(packingListEntry.gender != entryJson.stockKeepingUnit.genderCode.gender){
								console.log("ERROR. genderCode does not match " + entryJson.entryId);
								return;
							}
							if(packingListEntry.colorCode != entryJson.stockKeepingUnit.colorCode.colorCode){
								console.log("ERROR. colorCode does not match " + entryJson.entryId);
								return;
							}
							if(packingListEntry.mrp != entryJson.stockKeepingUnit.mrp){
								console.log("ERROR. mrp does not match " + entryJson.entryId);
								return;
							}
						}
						
						var key = "quantityForSize" + size;
						packingListEntry[key] = entryJson.quantity;	

					}
					
					//----- end
				}
				
				var salesOrderKeys = Object.keys(salesOrderEntries).sort();
				//to calculate balance so as to consider entries in other packing lists
				for(var l = 0; l < linkedPackingLists.length; l++){
					var pl = linkedPackingLists[l];
					var ple = pl.packingListEntries;
					
					//var packingListEntryKeys = Object.keys(ple).sort();
					//for(var e = 0; e < packingListEntryKeys.length; e++){
					//var index = packingListEntryKeys[e];
					for(var e = 0; e < salesOrderKeys.length; e++){	//always use sales order index. Sometimes packing list entries do not contain an index if all quantity for entry is Zero
						var index = salesOrderKeys[e];
						var packingListEntry = ple[index];
						var balanceForCurrentEntry = balanceQuantityForCurrentPackingList[index];
						for(var s = 0; s < sizeArray.length; s++){
							var size = sizeArray[s];
							var key = "quantityForSize" + size;
							if(productList[(index - 1)][key]!=null){
								if(packingListEntry!=null){
									if(packingListEntry[key]!=null){
										if(parseInt(packingListId) > 0){	
											//EDITING AN EXISTING PACKING LIST
											//packingListId  > 0 while editing existing packing list. Populate table with packing list entries instead of balance 
											if(parseInt(packingListId) == pl.packingListId){
												productList[(index - 1)][key] = packingListEntry[key];
											} else {
												balanceForCurrentEntry[key] = parseInt(balanceForCurrentEntry[key]) - packingListEntry[key];
											}
										} else {	
											// CREATING NEW PACKING LIST
											//populate table with balance only while creating
											productList[(index - 1)][key] = productList[(index - 1)][key] - packingListEntry[key];
											balanceForCurrentEntry[key] = parseInt(balanceForCurrentEntry[key]) - packingListEntry[key];
										}
									}
								}
							}
						}
					}					
				}
				refreshProductsTable();
				dataTable.column(15).nodes().each(function (cell, i) {
					cell.innerHTML = "";
				});
				NProgress.done();
			}
		});
		}
	});
	
	//special case where user has directly created a Packing list without any sales order
	function processUnlinkedPackingList(packingList){
		var packingListJson = packingList[0];

		document.getElementById("linkedSalesOrderId").value = "Not Applicable";
		document.getElementById("packingListRevisionNumber").value = "R"+packingListJson.packingListRevisionNumber;
		document.getElementById("packingListId").value = packingListJson.packingListId;
		document.getElementById('notes').value = packingListJson.notes;
		
		var fileDetailsArray = packingListJson.associatedFiles;
		var uploadedFiles = document.getElementById('uploadedFiles');
		var str = "";
		for(var f = 0; f < fileDetailsArray.length; f++){
			str+="<div style='border:1px solid #ccc;padding:10px;margin-top:5px;border-radius: 5px;'>";
			var fileJson = fileDetailsArray[f];
			str+="<a href='" + fileJson.fileLocation + "'>" + fileJson.name + "</a>";
			str+="<i class='fa fa-trash fa-2x' onclick='showDeleteFileDialog("+fileJson.id+","+packingListJson.id+")' style='float:right;padding:2px;margin:-4px;' aria-hidden='true'></i></div>"
		}
	
		uploadedFiles.innerHTML = str;
		
		var linkedPackingList = new Object();					
		linkedPackingList.packingListId = packingListJson.packingListId;
		linkedPackingList.clientNameOnPackingListDate = packingListJson.clientNameOnPackingListDate;
		if(packingListJson.status == "OPEN" 
			|| packingListJson.status == "CONFIRMED"
			|| packingListJson.status == "UNDER_REVISION"){
			$('#btnPreview').show();
		} else {
			$('#btnPreview').hide();
		}
		linkedPackingList[packingListJson.packingListId] = linkedPackingList;
		
		var packingListEntryJson = packingListJson.entry;
		var packingListEntries = [];
		linkedPackingList.packingListEntries = packingListEntries;
		
		//packing list entries start
		for(var s = 0; s < packingListEntryJson.length; s++){
			var entryJson = packingListEntryJson[s];
			var size = parseInt(entryJson.stockKeepingUnit.sizeCode.sizeCode);

			var entryId = entryJson.entryId;
			var packingListEntry = packingListEntries[entryId];
			if(packingListEntry == null){
				packingListEntry = new Object();
				packingListEntry.id = entryJson.entryId;
				packingListEntry.styleCode = entryJson.stockKeepingUnit.styleCode;
				packingListEntry.mrp = entryJson.stockKeepingUnit.mrp;
				packingListEntry.gender = entryJson.stockKeepingUnit.genderCode.gender;
				packingListEntry.genderCode = entryJson.stockKeepingUnit.genderCode.genderCode;
				packingListEntry.colorCode = entryJson.stockKeepingUnit.colorCode.colorCode;
				packingListEntries[packingListEntry.id] = packingListEntry;
			} else {
				//compare
				if(packingListEntry.styleCode != entryJson.stockKeepingUnit.styleCode){
					console.log("ERROR. Color code does not match " + entryJson.entryId);
					return;
				}
				if(packingListEntry.gender != entryJson.stockKeepingUnit.genderCode.gender){
					console.log("ERROR. genderCode does not match " + entryJson.entryId);
					return;
				}
				if(packingListEntry.colorCode != entryJson.stockKeepingUnit.colorCode.colorCode){
					console.log("ERROR. colorCode does not match " + entryJson.entryId);
					return;
				}
				if(packingListEntry.mrp != entryJson.stockKeepingUnit.mrp){
					console.log("ERROR. mrp does not match " + entryJson.entryId);
					return;
				}
			}
			
			var key = "quantityForSize" + size;
			packingListEntry[key] = entryJson.quantity;	

			}

			var pl = linkedPackingList;
			var ple = pl.packingListEntries;
			var packingListEntryKeys = Object.keys(ple).sort();
			for(var e = 0; e < packingListEntryKeys.length; e++){
				var index = packingListEntryKeys[e];

				var packingListEntry = ple[index];
				productList.push(packingListEntry);
			}					
		
		refreshProductsTable();
		dataTable.column(15).nodes().each(function (cell, i) {
			cell.innerHTML = "";
		});
		document.getElementById('purchaseOrderReference').value = packingListJson.purchaseOrderReference;
		document.getElementById("purchaseOrderReference").readOnly = true;
		var waitToSelectClient = setInterval(function(){
			if(customerArray!=null){
				var clientName = document.getElementById("clientName");
				for(var i = 0; i < clientName.length; i++){
					if(clientName.options[i].value == packingListJson.linkedCustomer.id){
						clientName.selectedIndex = i;
						clientName.disabled = true;
						clearInterval(waitToSelectClient);
						break;
					}
				}
			}
		}, 100);
	}
	
	function  showPreview(){
		window.location = "preview-packing-list.html?packingListId="+packingListId;
	}
	
	var packingListId = -1;
	function createPackingList(){
	
		if(document.getElementById("clientName").value.length < 1){
			$('.nav-tabs-horizontal li:eq(0) a').tab('show')
			return;
		}
		if(productList.length < 1){
			$('.nav-tabs-horizontal li:eq(1) a').tab('show');
			document.getElementById('productErrorDiv').style.display = "block";
			return;
		}
		document.getElementById('btnSave').disabled = true;
		var packingList = new Object();
		
		//packingList.packingListId = document.getElementById('packingListId').value;
		//packingList.packingListRevisionNumber = document.getElementById('packingListRevisionNumber').value;
		
		packingList.purchaseOrderReference = document.getElementById('purchaseOrderReference').value;
					
		var clientName = document.getElementById('clientName');
		packingList.linkedCustomer = clientName.options[clientName.selectedIndex].value;
		packingList.clientNameOnPackingListDate = clientName.options[clientName.selectedIndex].text;

		if(getParameterByName('packingListId')!=null){
			packingListId = getParameterByName('packingListId');
		} else {
			packingListId = -1;
		}
		
		packingList.linkedSalesOrderId = salesOrderId;
		packingList.linkedSalesOrderInternalId = linkedSalesOrderInternalId;
		packingList.revisionReason = ''; // To be done later
		packingList.notes = document.getElementById('notes').value;
		
		packingList.productList = productList;
		NProgress.start();
		var request = new XMLHttpRequest();
		request.onreadystatechange = function(){
			NProgress.inc();
			if(request.readyState == 4 && request.status == 200){
				var response = JSON.parse(request.response);
				if(response.result == "success"){
					if(document.getElementById('uploadDocuments').files.length==0){
						window.location = "landing-packing-list.html";
						return;
					}
					var uploadDocuments = document.getElementById("uploadDocuments");
					var formData = new FormData();
					for (var i = 0, len = document.getElementById('uploadDocuments').files.length; i < len; i++) {
						formData.append("file", document.getElementById('uploadDocuments').files[i]);
					}


					//send formData to server-side
					$.ajax({
						url : base_url + '/AdValoramAdmin/upload/packingList/' + response.objectId,
						type : 'post',
						beforeSend: function(request) {
							request.setRequestHeader("Authorization", "Bearer " + localStorage.getItem("token"));
						},
						data : formData,
						dataType : 'json',
						async : true,
						processData: false,  // tell jQuery not to process the data
						contentType: false,   // tell jQuery not to set contentType
						error : function(request){
							console.log(request.responseText);
							alert(request.responseText);
						},
						success : function(json){
							//place your code here
							NProgress.done();
							window.location = "landing-packing-list.html";
						}
					});
				}
			}
		};
		
		if(packingListId < 0){
			request.open ("POST", base_url + "/AdValoramAdmin/packingList", true);
		} else {
			request.open ("PUT", base_url + "/AdValoramAdmin/packingList/" + packingListId, true);
		}
		request.setRequestHeader("content-type", "application/json");
		request.setRequestHeader("Authorization", "Bearer " + localStorage.getItem("token"));
		request.send(JSON.stringify(packingList));
	}
	
	var productList = [];
	function saveProductAndClose(){
		var product = new Object();
		product.id = document.getElementById("productId").innerHTML;
		product.styleCode = selectedStyleCode;
		product.colorCode = document.getElementById("dropDownColorCode").value;
		
		var dropDownGender = document.getElementById("dropDownGender");
		product.gender = dropDownGender.options[dropDownGender.selectedIndex].text;	//to display 
		product.genderCode = document.getElementById("dropDownGender").value;	//to send to server
		product.mrp = document.getElementById("textMrp").value;
		product.quantityForSize28 = (document.getElementById("quantityForSize28") == null 
									|| document.getElementById("quantityForSize28").value == 0
									|| !document.getElementById('productSize28').checked) ? "" : document.getElementById("quantityForSize28").value;
		product.quantityForSize30 = (document.getElementById("quantityForSize30") == null
									|| document.getElementById("quantityForSize30").value == 0
									|| !document.getElementById('productSize30').checked)? "" :  document.getElementById("quantityForSize30").value;
		product.quantityForSize32 = (document.getElementById("quantityForSize32") == null 
									|| document.getElementById("quantityForSize32").value == 0
									||!document.getElementById('productSize32').checked) ? "" : document.getElementById("quantityForSize32").value;
		product.quantityForSize34 = (document.getElementById("quantityForSize34") == null 
									|| document.getElementById("quantityForSize34").value == 0
									|| !document.getElementById('productSize34').checked) ? "" : document.getElementById("quantityForSize34").value;
		product.quantityForSize36 = (document.getElementById("quantityForSize36") == null 
									|| document.getElementById("quantityForSize36").value == 0
									|| !document.getElementById('productSize36').checked) ? "" : document.getElementById("quantityForSize36").value;
		product.quantityForSize38 = (document.getElementById("quantityForSize38") == null 
									|| document.getElementById("quantityForSize38").value == 0
									|| !document.getElementById('productSize38').checked) ? "" : document.getElementById("quantityForSize38").value;
		product.quantityForSize40 = (document.getElementById("quantityForSize40") == null 
									|| document.getElementById("quantityForSize40").value == 0
									|| !document.getElementById('productSize40').checked) ? "" : document.getElementById("quantityForSize40").value;
		product.quantityForSize42 = (document.getElementById("quantityForSize42") == null 
									|| document.getElementById("quantityForSize42").value == 0
									|| !document.getElementById('productSize42').checked) ? "" : document.getElementById("quantityForSize42").value;
		product.quantityForSize44 = (document.getElementById("quantityForSize44") == null 
									|| document.getElementById("quantityForSize44").value == 0
									|| !document.getElementById('productSize44').checked) ? "" : document.getElementById("quantityForSize44").value;
		product.quantityForSize46 = (document.getElementById("quantityForSize46") == null 
									|| document.getElementById("quantityForSize46").value == 0
									|| !document.getElementById('productSize46').checked) ? "" : document.getElementById("quantityForSize46").value;
		product.quantityForSize48 = (document.getElementById("quantityForSize48") == null 
									|| document.getElementById("quantityForSize48").value == 0
									|| !document.getElementById('productSize48').checked) ? "" : document.getElementById("quantityForSize48").value;
		productList.push(product);
		refreshProductsTable();
		closeAddProductModal();
	}
	
	function limitQuantityTo(element, productListIndex, key, maxQuantity){
		if(element.value > maxQuantity){
			element.value = maxQuantity;
		}
		var key = "quantityForSize"+key;
		productList[productListIndex][key] = parseInt(element.value);
	}
	
	function refreshProductsTable(){
		$('#productsTable').dataTable().fnDestroy();
		var tbody = '';
		var totalQuantity = 0;
		for(var p = 0; p < productList.length; p++){
			var product = productList[p];
				tbody +=  "<tr>" +
				"<td>" + product.id + "</td>"+
				"<td>" + product.styleCode + "</td>"+
				"<td>" + product.colorCode + "</td>"+
				"<td>" + product.gender + "</td>";
				
				for(var s = 28; s <=48; s = s+2){
					var prefix = "quantityForSize";
					var key = prefix + s;
			
					var balanceForCurrentEntry = balanceQuantityForCurrentPackingList[(p+1)];
					if(product[key]!=null)	{
						totalQuantity+= parseInt(product[key]);
						if(packingListId < 0 && salesOrderId < 0){
							tbody+="<td>" + product[key]+"</td>";
						} else {
							if(salesOrderId < 0){
								tbody+="<td>" + product[key]+"</td>";
							} else {
								tbody+="<td><input class = 'form-control' type='number' min='0' value='" + product[key] + "' onchange = limitQuantityTo(this," + p + ","+s+"," + balanceForCurrentEntry[key]+"); max='" + balanceForCurrentEntry[key] + "'></td>";
							}
						}
					} else {
						tbody+="<td>0</td>";
					}
				
				}			
			
				tbody+="<td><a href='javascript: void(0)'; class='link-underlined margin-right-5' onclick='editProductEntry("+product.id
				+");'><i class='icmn-pencil5'></i> View</a><a href='javascript: void(0);' class='link-underlined' onclick='deleteProductEntryAndUpdateView("+product.id+");'><i class='icmn-cross2'></i> Remove</a></td></tr>";
		}
		
		if(totalQuantity == 0){
			document.getElementById('salesOrderExhaustedDialog').style.display = "block";
			document.getElementById('buttonRedirectToSalesOrderLanding').onclick = function (){
				window.location = "landing-sales-order.html";
			}
			return;
		}
		$('#productsTableBody').html(tbody);	
		dataTable = $('#productsTable').DataTable();	
			dataTable.column(4).visible(document.getElementById('productSize28').checked);
			dataTable.column(5).visible(document.getElementById('productSize30').checked);
			dataTable.column(6).visible(document.getElementById('productSize32').checked);
			dataTable.column(7).visible(document.getElementById('productSize34').checked);
			dataTable.column(8).visible(document.getElementById('productSize36').checked);
			dataTable.column(9).visible(document.getElementById('productSize38').checked);
			dataTable.column(10).visible(document.getElementById('productSize40').checked);
			dataTable.column(11).visible(document.getElementById('productSize42').checked);
			dataTable.column(12).visible(document.getElementById('productSize44').checked);
			dataTable.column(13).visible(document.getElementById('productSize46').checked);
			dataTable.column(14).visible(document.getElementById('productSize48').checked);
	}
	
	function deleteProductEntryAndUpdateView(id){
		deleteProductEntry(id);
		refreshProductsTable();
	}
	
	function deleteProductEntry(id){
		for(var r = 0; r < productList.length; r++){
			if(productList[r].id == id){
				productList.splice(r, 1);
			}
		}
		//re-assign IDs
		for(var r = 0; r < productList.length; r++){
			productList[r].id = r+1;
		}
	}
	
	
	var modal = document.getElementById('addProductModal');
	function addProduct(){
		modal.style.display = "block";
		document.getElementById("productId").innerHTML = productList.length + 1;
	}
	
	function closeAddProductModal(){
		document.getElementById("addProductModal").style.display = "none";
	}
	
	var span = document.getElementsByClassName("close")[0];

	// When the user clicks on <span> (x), close the modal
	span.onclick = function() {
		modal.style.display = "none";
	}
</script>
</body>
</html>