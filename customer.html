<!DOCTYPE html>
<html ng-app="cleanUI">
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>AdValoram Clothing</title>

    <link href="assets/common/img/favicon.144x144.png" rel="apple-touch-icon" type="image/png" sizes="144x144">
    <link href="assets/common/img/favicon.114x114.png" rel="apple-touch-icon" type="image/png" sizes="114x114">
    <link href="assets/common/img/favicon.72x72.png" rel="apple-touch-icon" type="image/png" sizes="72x72">
    <link href="assets/common/img/favicon.57x57.png" rel="apple-touch-icon" type="image/png">
    <link href="assets/common/img/favicon.png" rel="icon" type="image/png">
    <link href="../favicon.ico" rel="shortcut icon">

    <!-- HTML5 shim and Respond.js for < IE9 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Vendors Styles -->
    <!-- v1.0.0 -->
    <link rel="stylesheet" type="text/css" href="assets/vendors/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/jscrollpane/style/jquery.jscrollpane.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/ladda/dist/ladda-themeless.min.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/select2/dist/css/select2.min.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/fullcalendar/dist/fullcalendar.min.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/cleanhtmlaudioplayer/src/player.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/cleanhtmlvideoplayer/src/player.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/bootstrap-sweetalert/dist/sweetalert.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/summernote/dist/summernote.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/owl.carousel/dist/assets/owl.carousel.min.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/ionrangeslider/css/ion.rangeSlider.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/datatables/media/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/c3/c3.min.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/chartist/dist/chartist.min.css">
    <!-- v1.4.0 -->
    <link rel="stylesheet" type="text/css" href="assets/vendors/nprogress/nprogress.css">
    <link rel="stylesheet" type="text/css" href="assets/vendors/jquery-steps/demo/css/jquery.steps.css">
    <!-- v1.4.2 -->
    <link rel="stylesheet" type="text/css" href="assets/vendors/bootstrap-select/dist/css/bootstrap-select.min.css">
    <!-- v1.7.0 -->
    <link rel="stylesheet" type="text/css" href="assets/vendors/dropify/dist/css/dropify.min.css">

    <!-- Clean UI Styles -->
    <link rel="stylesheet" type="text/css" href="assets/common/css/source/main.css">

    <!-- Vendors Scripts -->
    <!-- v1.0.0 -->
    <script src="assets/vendors/jquery/jquery.min.js"></script>
    <script src="assets/vendors/tether/dist/js/tether.min.js"></script>
    <script src="assets/vendors/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="assets/vendors/jquery-mousewheel/jquery.mousewheel.min.js"></script>
    <script src="assets/vendors/jscrollpane/script/jquery.jscrollpane.min.js"></script>
    <script src="assets/vendors/spin.js/spin.js"></script>
    <script src="assets/vendors/ladda/dist/ladda.min.js"></script>
    <script src="assets/vendors/select2/dist/js/select2.full.min.js"></script>
    <script src="assets/vendors/html5-form-validation/dist/jquery.validation.min.js"></script>
    <script src="assets/vendors/jquery-typeahead/dist/jquery.typeahead.min.js"></script>
    <script src="assets/vendors/jquery-mask-plugin/dist/jquery.mask.min.js"></script>
    <script src="assets/vendors/autosize/dist/autosize.min.js"></script>
    <script src="assets/vendors/bootstrap-show-password/bootstrap-show-password.min.js"></script>
    <script src="assets/vendors/moment/min/moment.min.js"></script>
    <script src="assets/vendors/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>
    <script src="assets/vendors/fullcalendar/dist/fullcalendar.min.js"></script>
    <script src="assets/vendors/cleanhtmlaudioplayer/src/jquery.cleanaudioplayer.js"></script>
    <script src="assets/vendors/cleanhtmlvideoplayer/src/jquery.cleanvideoplayer.js"></script>
    <script src="assets/vendors/bootstrap-sweetalert/dist/sweetalert.min.js"></script>
    <script src="assets/vendors/remarkable-bootstrap-notify/dist/bootstrap-notify.min.js"></script>
    <script src="assets/vendors/summernote/dist/summernote.min.js"></script>
    <script src="assets/vendors/owl.carousel/dist/owl.carousel.min.js"></script>
    <script src="assets/vendors/ionrangeslider/js/ion.rangeSlider.min.js"></script>
    <script src="assets/vendors/nestable/jquery.nestable.js"></script>
    <script src="assets/vendors/datatables/media/js/jquery.dataTables.min.js"></script>
    <script src="assets/vendors/datatables/media/js/dataTables.bootstrap4.min.js"></script>
    <script src="assets/vendors/datatables-fixedcolumns/js/dataTables.fixedColumns.js"></script>
    <script src="assets/vendors/datatables-responsive/js/dataTables.responsive.js"></script>
    <script src="assets/vendors/editable-table/mindmup-editabletable.js"></script>
    <script src="assets/vendors/d3/d3.min.js"></script>
    <script src="assets/vendors/c3/c3.min.js"></script>
    <script src="assets/vendors/chartist/dist/chartist.min.js"></script>
    <script src="assets/vendors/peity/jquery.peity.min.js"></script>
    <!-- v1.0.1 -->
    <script src="assets/vendors/chartist-plugin-tooltip/dist/chartist-plugin-tooltip.min.js"></script>
    <!-- v1.1.1 -->
    <script src="assets/vendors/gsap/src/minified/TweenMax.min.js"></script>
    <script src="assets/vendors/hackertyper/hackertyper.js"></script>
    <script src="assets/vendors/jquery-countTo/jquery.countTo.js"></script>
    <!-- v1.4.0 -->
    <script src="assets/vendors/nprogress/nprogress.js"></script>
    <script src="assets/vendors/jquery-steps/build/jquery.steps.min.js"></script>
    <!-- v1.4.2 -->
    <script src="assets/vendors/bootstrap-select/dist/js/bootstrap-select.min.js"></script>
    <script src="assets/vendors/chart.js/src/Chart.bundle.min.js"></script>
    <!-- v1.7.0 -->
    <script src="assets/vendors/dropify/dist/js/dropify.min.js"></script>


    <!-- Angular Version Scripts -->
    <script src="assets/vendors/angular/angular.min.js"></script>
    <script src="assets/vendors/angular-route/angular-route.min.js"></script>
    <script src="assets/common/js/version_angular/app.js"></script>

    <!-- Angular Version Controllers -->
<!--    <script src="pages/register.ctrl.js"></script>
    <script src="pages/login.ctrl.js"></script>
    <script src="pages/lockscreen.ctrl.js"></script>
-->

    <!-- Clean UI Scripts -->
    <script src="assets/common/js/common.js"></script>
    <script src="assets/common/js/demo.temp.js"></script>
	<script src="js/load-locations.js"></script>
	<script src="js/common.js"></script>
	<script src="js/common-masters.js"></script>
	<link rel="stylesheet" type="text/css" href="css/float-modal.css">
</head>

<body class="theme-blue menu-top menu-top-compact menu-static colorful-enabled" ng-controller="MainCtrl" onload="fetchLocations();">

<nav class="left-menu" left-menu ng-class="{'hidden-left-menu': hideLeftMenu}">
    <div class="logo-container">
        <a href="#/dashboards/alpha" class="logo">
            <img src="assets/common/img/logo.png" alt="AdValoram Clothing" />
            <img class="logo-inverse" src="assets/common/img/logo.png" alt="AdValoram Clothing" />
        </a>
    </div>
    <div class="left-menu-inner scroll-pane">
        <ul class="left-menu-list left-menu-list-root list-unstyled">   
		
            <li>
                <a class="left-menu-link" href="home.html">
                    <i class="left-menu-link-icon icmn-home2"></i>
                    Home
                </a>
            </li>

            <li class="left-menu-list-separator"><!-- --></li>
            <li class="left-menu-list-submenu">
                <a class="left-menu-link" href="javascript: void(0);">
                    <i class="left-menu-link-icon icmn-files-empty2"><!-- --></i>
                    Dashboard
                </a>
                <ul class="left-menu-list list-unstyled">
                    <li>
                        <a class="left-menu-link" href="#">
                            Purchase
                        </a>
                    </li>
                    <li>
                        <a class="left-menu-link" href="#">
                            Inventory
                        </a>
                    </li>
					<li>
                        <a class="left-menu-link" href="#">
                            Sales
                        </a>
                    </li>
                </ul>
            </li>
			<li class="left-menu-list-separator"><!-- --></li>
            <li>
                <a class="left-menu-link" href="#">
                    <i class="left-menu-link-icon icmn-profile"><!-- --></i>
                    Purchase
                </a>
            </li>
			<li class="left-menu-list-separator"><!-- --></li>
            <li>
                <a class="left-menu-link" href="#">
                    <i class="left-menu-link-icon icmn-profile"><!-- --></i>
                    Inventory
                </a>
            </li>
			<li class="left-menu-list-separator"><!-- --></li>
            <li class="left-menu-list-submenu">
                <a class="left-menu-link" href="javascript: void(0);">
                    <i class="left-menu-link-icon icmn-files-empty2"><!-- --></i>
                    Sales
                </a>
                <ul class="left-menu-list list-unstyled">
                    <li>
                        <a class="left-menu-link" href="landing-sales-order.html">
                            Sales Order
                        </a>
                    </li>
                    <li>
                        <a class="left-menu-link" href="landing-packing-list.html">
                            Packing List
                        </a>
                    </li>
					<li>
                        <a class="left-menu-link" href="landing-invoice.html">
                            Invoice
                        </a>
                    </li>
					<li>
                        <a class="left-menu-link" href="landing-credit-note.html">
                            Credit Note
                        </a>
                    </li>
                </ul>
            </li>
			<li class="left-menu-list-separator"><!-- --></li>
            <li>
                <a class="left-menu-link" href="barcode-printing.html">
                    <i class="left-menu-link-icon icmn-profile"><!-- --></i>
                    Barcode Printing
                </a>
            </li>
            <li class="left-menu-list-separator"><!-- --></li>
			<!-- remove "horizontal-left-direction" class, for get submenu with right direction (horizontal menu option) -->
            <li class="left-menu-list-submenu horizontal-left-direction">
                <a class="left-menu-link" href="javascript: void(0);">
                    Create
                </a>
                <!-- level 1 -->
                <ul class="left-menu-list list-unstyled">
                    <li class="left-menu-list-submenu">
                        <a class="left-menu-link" href="javascript: void(0);">
                            Master
                        </a>
                        <!-- level 2 -->
                        <ul class="left-menu-list list-unstyled">
						<li>
							<a class="left-menu-link" href="bank.html">
								Bank
							</a>
						</li>
						<li>
							<a class="left-menu-link" href="customer.html">
								Customer
							</a>
						</li>
						<li>
							<a class="left-menu-link" href="employee.html">
								Employee
							</a>
						</li>
						<li>
							<a class="left-menu-link" href="location.html">
								Location
							</a>
						</li>
						<li>
							<a class="left-menu-link" href="product.html">
								Product
							</a>
						</li>
						<li>
							<a class="left-menu-link" href="tax.html">
								Tax
							</a>
						</li>
						<li>
							<a class="left-menu-link" href="transporter.html">
								Transporter
							</a>
						</li>
                        </ul>
                    </li>
					<li class="left-menu-list-submenu">
                        <a class="left-menu-link" href="javascript: void(0);">
                            Sales
                        </a>
                        <!-- level 2 -->
                        <ul class="left-menu-list list-unstyled">
							<li>
								<a class="left-menu-link" href="sales-order.html">
									Sales Order
								</a>
							</li>
							<li>
								<a class="left-menu-link" href="packing-list.html">
									Packing List
								</a>
							</li>
							<li>
								<a class="left-menu-link" href="invoice.html">
									Invoice
								</a>
							</li>
							<li>
								<a class="left-menu-link" href="credit-note.html">
									Credit Note
								</a>
							</li>
                        </ul>
                    </li>
                </ul>
            </li>

			<li class="left-menu-list-separator"><!-- --></li>
            <li class="left-menu-list-submenu">
                <a class="left-menu-link" href="javascript: void(0);">
                    <i class="left-menu-link-icon icmn-files-empty2"><!-- --></i>
                    Masters
                </a>
                <ul class="left-menu-list list-unstyled">
                    <li>
                        <a class="left-menu-link" href="landing-bank.html">
                            Bank
                        </a>
                    </li>
                    <li>
                        <a class="left-menu-link" href="landing-customer.html">
                            Customer
                        </a>
                    </li>
					<li>
                        <a class="left-menu-link" href="landing-employee.html">
                            Employee
                        </a>
                    </li>
					<li>
                        <a class="left-menu-link" href="landing-location.html">
                            Location
                        </a>
                    </li>
					<li>
                        <a class="left-menu-link" href="landing-product.html">
                            Product
                        </a>
                    </li>
					<li>
                        <a class="left-menu-link" href="landing-tax.html">
                            Tax
                        </a>
                    </li>
					<li>
                        <a class="left-menu-link" href="landing-transporter.html">
                            Transporter
                        </a>
                    </li>
                </ul>
            </li>
			
			<li class="left-menu-list-separator"></li>
            <li>
                <a class="left-menu-link" href="#">
                    <i class="left-menu-link-icon icmn-profile"><!-- --></i>
                    Settings
                </a>
            </li>
            <li>
                <a class="left-menu-link" href="#">
                    <i class="left-menu-link-icon icmn-bubbles5"><!-- --></i>
                    Help
                </a>
            </li>
            <li>
                <a class="left-menu-link" href="#">
                    <i class="left-menu-link-icon icmn-mail2"><!-- --></i>
                    Support
                </a>
            </li>
            <li class="left-menu-list-separator"><!-- --></li>
            <li>
                <a class="left-menu-link" onclick = "sendSignoutRequest();" href="#">
                    <i class="left-menu-link-icon icmn-profile"><!-- --></i>
                    Sign Out
                </a>
            </li>
        </ul>
    </div>
</nav>
<nav class="top-menu" ng-class="{'hidden-top-menu': hideTopMenu}">
    <div class="menu-icon-container hidden-md-up">
        <div class="animate-menu-button left-menu-toggle">
            <div><!-- --></div>
        </div>
    </div>
    <div class="menu">
        <div class="menu-user-block">
            <div class="dropdown dropdown-avatar">
                <a href="javascript: void(0);" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                    <span class="avatar" href="javascript:void(0);">
                        <img src="../assets/common/img/temp/avatars/1.jpg" alt="Alternative text to the image">
                    </span>
                </a>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="" role="menu">
                    <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-user"></i> Profile</a>
                    <div class="dropdown-divider"></div>
                    <div class="dropdown-header">Home</div>
                    <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-circle-right"></i> System Dashboard</a>
                    <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-circle-right"></i> User Boards</a>
                    <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-circle-right"></i> Issue Navigator (35 New)</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-exit"></i> Logout</a>
                </ul>
            </div>
        </div>
        <div class="menu-user-block menu-notifications">
            <div class="dropdown dropdown-avatar">
                <a href="javascript: void(0);" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                    <i class="menu-notification-icon icmn-bubbles7"></i>
                </a>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="" role="menu">
                    <div class="notification-block">
                        <div class="item">
                            <i class="notification-icon icmn-star-full"></i>
                            <div class="inner">
                                <div class="title">
                                    <span class="pull-right">now</span>
                                    <a href="javascript: void(0);">Update Status: <span class="label label-danger font-weight-700">New</span></a>
                                </div>
                                <div class="descr">
                                    Failed to get available update data. To ensure the proper functioning of your application, update now.
                                </div>
                            </div>
                        </div>
                        <div class="item">
                            <i class="notification-icon icmn-stack3"></i>
                            <div class="inner">
                                <div class="title">
                                    <span class="pull-right">24 min ago</span>
                                    <a href="javascript: void(0);">Income: <span class="label label-default font-weight-700">$299.00</span></a>
                                </div>
                                <div class="descr">
                                    Failed to get available update data. To ensure the proper functioning of your application, update now.
                                </div>
                            </div>
                        </div>
                        <div class="item">
                            <i class="notification-icon icmn-bubbles5"></i>
                            <div class="inner">
                                <div class="title">
                                    <span class="pull-right">30 min ago</span>
                                    <a href="javascript: void(0);">Inbox Message</a>
                                </div>
                                <div class="descr">
                                    From: <a href="javascript: void(0);">David Bowie</a>
                                </div>
                            </div>
                        </div>
                        <div class="item">
                            <i class="notification-icon icmn-pie-chart2"></i>
                            <div class="inner">
                                <div class="title">
                                    <span class="pull-right">now</span>
                                    <a href="javascript: void(0);">Update Status: <span class="label label-primary font-weight-700">New</span></a>
                                </div>
                                <div class="descr">
                                    Failed to get available update data. To ensure the proper functioning of your application, update now.
                                </div>
                            </div>
                        </div>
                        <div class="item">
                            <i class="notification-icon icmn-books"></i>
                            <div class="inner">
                                <div class="title">
                                    <span class="pull-right">24 min ago</span>
                                    <a href="javascript: void(0);">Income: <span class="label label-warning font-weight-700">$299.00</span></a>
                                </div>
                                <div class="descr">
                                    Failed to get available update data. To ensure the proper functioning of your application, update now.
                                </div>
                            </div>
                        </div>
                        <div class="item">
                            <i class="notification-icon icmn-cog util-spin-delayed-pseudo"></i>
                            <div class="inner">
                                <div class="title">
                                    <span class="pull-right">30 min ago</span>
                                    <a href="javascript: void(0);">Inbox Message</a>
                                </div>
                                <div class="descr">
                                    From: <a href="javascript: void(0);">David Bowie</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </ul>
            </div>
        </div>
        <div class="menu-info-block">
            <div class="left">
                <div class="header-buttons">
                    <div class="dropdown">
                        <a href="javascript: void(0);" class="dropdown-toggle dropdown-inline-button" data-toggle="dropdown" aria-expanded="false">
                            <i class="dropdown-inline-button-icon icmn-folder-open"></i>
                            <span class="hidden-lg-down">Issues History</span>
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="" role="menu">
                            <a class="dropdown-item" href="javascript:void(0)">Current search</a>
                            <a class="dropdown-item" href="javascript:void(0)">Search for issues</a>
                            <div class="dropdown-divider"></div>
                            <div class="dropdown-header">Opened</div>
                            <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-checkmark"></i> CLNUI-253 Project implemen...</a>
                            <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-checkmark"></i> CLNUI-234 Active history iss...</a>
                            <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-clock"></i> CLNUI-424 Ionicons intergrat...</a>
                            <a class="dropdown-item" href="javascript:void(0)">More...</a>
                            <div class="dropdown-divider"></div>
                            <div class="dropdown-header">Filters</div>
                            <a class="dropdown-item" href="javascript:void(0)">My open issues</a>
                            <a class="dropdown-item" href="javascript:void(0)">Reported by me</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="javascript:void(0)">Import issues from CSV</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-cog"></i> Settings</a>
                        </ul>
                    </div>
                    <div class="dropdown">
                        <a href="javascript: void(0);" class="dropdown-toggle dropdown-inline-button" data-toggle="dropdown" aria-expanded="false">
                            <i class="dropdown-inline-button-icon icmn-database"></i>
                            <span class="hidden-lg-down">Dashboards</span>
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="" role="menu">
                            <div class="dropdown-header">Active</div>
                            <a class="dropdown-item" href="javascript:void(0)">Project Management</a>
                            <a class="dropdown-item" href="javascript:void(0)">User Inetrface Development</a>
                            <a class="dropdown-item" href="javascript:void(0)">Documentation</a>
                            <div class="dropdown-header">Inactive</div>
                            <a class="dropdown-item" href="javascript:void(0)">Marketing</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="javascript:void(0)"><i class="dropdown-icon icmn-cog"></i> Settings</a>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="left hidden-md-down">
                <div class="example-top-menu-chart">
                    <span class="title">Income:</span>
                    <span class="chart" id="topMenuChart" style="display: none;">1,5,1,7,5,6,6,1,4,7</span><svg class="peity" height="22" width="44"><rect fill="#01a8fe" x="0.44000000000000006" y="18.857142857142858" width="3.52" height="3.1428571428571423"></rect><rect fill="#01a8fe" x="4.840000000000001" y="6.285714285714285" width="3.5199999999999987" height="15.714285714285715"></rect><rect fill="#01a8fe" x="9.24" y="18.857142857142858" width="3.5199999999999996" height="3.1428571428571423"></rect><rect fill="#01a8fe" x="13.64" y="0" width="3.5199999999999996" height="22"></rect><rect fill="#01a8fe" x="18.04" y="6.285714285714285" width="3.520000000000003" height="15.714285714285715"></rect><rect fill="#01a8fe" x="22.439999999999998" y="3.1428571428571423" width="3.520000000000003" height="18.857142857142858"></rect><rect fill="#01a8fe" x="26.839999999999996" y="3.1428571428571423" width="3.5200000000000067" height="18.857142857142858"></rect><rect fill="#01a8fe" x="31.24" y="18.857142857142858" width="3.5200000000000067" height="3.1428571428571423"></rect><rect fill="#01a8fe" x="35.64" y="9.428571428571429" width="3.520000000000003" height="12.571428571428571"></rect><rect fill="#01a8fe" x="40.04" y="0" width="3.520000000000003" height="22"></rect></svg>
                    <span class="count">425.00 USD</span>

                    <!-- Top Menu Chart Script -->
                    <script>
                        $(function () {

                            var topMenuChart = $("#topMenuChart").peity("bar", {
                                fill: ['#01a8fe'],
                                height: 22,
                                width: 44
                            });

                            setInterval(function() {
                                var random = Math.round(Math.random() * 10);
                                var values = topMenuChart.text().split(",");
                                values.shift();
                                values.push(random);
                                topMenuChart.text(values.join(",")).change()
                            }, 1000);

                        });
                    </script>
                    <!-- Top Menu Chart Script -->
                </div>
            </div>
            <div class="right hidden-lg-down margin-left-20">
                <div class="search-block">
                    <div class="form-input-icon form-input-icon-right">
                        <i class="icmn-search"></i>
                        <input class="form-control form-control-sm form-control-rounded" placeholder="Search..." type="text">
                        <button type="submit" class="search-block-submit "></button>
                    </div>
                </div>
            </div>

        </div>
    </div>
</nav>
<section class = "page-content">
<div class="page-content-inner">

    <!-- Ecommerce Product Details -->
    <section class="panel panel-with-borders" style="overflow:auto">
        <div class="panel-heading">
            <h2>
                <div id = "customerTitle">Create New Customer</div>
            </h2>
        </div>
        <div class="panel-body">
			<div class="nav-tabs-horizontal" id = "homeTabs">
				<ul class="nav nav-tabs" role="tablist">
					<li class="nav-item">
						<a id = "0" class="nav-link active" href="javascript: void(0);" data-toggle="tab" data-target="#tab1" role="tab" aria-expanded="false">Company Details</a>
					</li>
					<li class="nav-item">
						<a id = "1" class="nav-link" href="javascript: void(0);" data-toggle="tab" data-target="#tab2" role="tab" aria-expanded="true">Trade Terms</a>
					</li>
					<li class="nav-item">
						<a id = "2" class="nav-link" href="javascript: void(0);" data-toggle="tab" data-target="#tab3" role="tab" aria-expanded="true">Taxation & Related</a>
					</li>
					<li class="nav-item">
						<a id = "3" class="nav-link" href="javascript: void(0);" data-toggle="tab" data-target="#tab4" role="tab" aria-expanded="true">Transport</a>
					</li>
					<li class="nav-item">
						<a id = "4" class="nav-link" href="javascript: void(0);" data-toggle="tab" data-target="#tab5" role="tab" aria-expanded="true">Alerts & Uploads</a>
					</li>
				</ul>
				<div id = "form-validation" name="form-validation" class="tab-content padding-vertical-20">
					<div class="tab-pane active" id="tab1" role="tabpanel" aria-expanded="false">
						
						<div class = "col-lg-5">
							<div class="form-group">
                                <label for="companyName">Customer / Company Name*</label>
                                <input class="form-control" id="companyName" type="text" name="validation[Company name]"
																					   data-validation="[L>=3]"
																					   data-validation-message="$ must contain atleast 3 characters">
                            </div>
							<div class="form-group">
                                <label for="linkedDistributor">Linked Distributor, if any</label>
								<select class="form-control" id="linkedDistributor" onchange = "resetSelect(linkedBroker)">
								</select>
                            </div>

							<div class="form-group">
								<label class="form-control-label" for="billingAddress">Billing Address*</label>
								<textarea class="form-control" rows="3" id="billingAddress" name="validation[Billing address]"
																					   data-validation="[L>=3]"
																					   data-validation-message="$ must contain atleast 3 characters"></textarea>
							</div>
						
							<div class="form-group">
                                <label for="city">City*</label>
								<select class="form-control" id="city" onChange = "refreshLocationDistrictAndState()" name="validation[City]"
																														   data-validation="[L>=1]"
																														   data-validation-message="Please select a valid $">
								</select>
                            </div>
							
							<div class="form-group">
                                <label for="district">District</label>
                                <input class="form-control" id="district" type="text" readonly>
                            </div>
						
							<div class="form-group">
                                <label for="contactPerson">Contact Person*</label>
                                <input class="form-control" id="contactPerson" type="text" name="validation[name]"
																					   data-validation="[L>=2]"
																					   data-validation-message="Please enter a valid $">
                            </div>
							
							<div class="form-group">
                                <label for="emailAddress">Email Address</label><span id = "emailAddressError" style = "color:red; display:none;"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Please check email address format !</span>
                                <input class="form-control" id="emailAddress" type="text" name="validation[email]"
																					   data-validation="[L>=2]"
																					   data-validation-message="$ must contain atleast 3 characters">
                            </div>
						</div>
						
						
						<div class = "col-lg-5" style="padding-left:100px;">
							<div class="form-group">
								<label class="form-control-label" for="customerType" >Customer Type*</label><br/>
                                <input id="radioRetailer" name = "customerType" type="radio" value="Retailer" style="margin:11px" checked onclick="displayHideDistBrokerRow();">Retailer
								<input id="radioDistributor" name = "customerType" type="radio" value="Distributor" style="margin:11px" onclick="displayHideDistBrokerRow();;">Distributor
								<input id="radioBroker" name = "customerType" type="radio" value="Broker" style="margin:11px" onclick="displayHideDistBrokerRow();;">Broker
                            </div>
							
							<div class="form-group">
                                <label for="linkedBroker">Linked Broker, if any</label>
								<select class="form-control" id="linkedBroker"  onchange = "resetSelect(linkedDistributor)">
										
								</select>
                            </div>
							
							<div class="form-group">
								<label class="form-control-label" for="deliveryAddress">Delivery Address*</label>
								<textarea class="form-control" rows="3" id="deliveryAddress" name="validation[Delivery Address]"
																					   data-validation="[L>=3]"
																					   data-validation-message="$ must contain atleast 3 characters"></textarea>
							</div>
							
							<div class="form-group">
                                <label for="pinCode">Pin Code*</label>
                                <input class="form-control" id="pinCode" maxlength="6" type="text" name="validation[pincode]"
																					   data-validation="[L>=2]"
																					   data-validation-message="Please enter a valid $" onkeypress='return event.charCode >= 48 && event.charCode <= 57'>
                            </div>
							
							<div class="form-group">
                                <label for="state">State*</label>
								<input class="form-control" id="state" type="text" readonly>
                            </div>
							
							<div class="form-group">
                                <label for="contactNumber">Contact Number*</label>
                                <input class="form-control" id="contactNumber" type="text" name="validation[contact number]"
																					   data-validation="[L>=8]"
																					   data-validation-message="Please enter a valid $" onkeypress='return event.charCode >= 48 && event.charCode <= 57'>
                            </div>
							
							<div class="form-group">
                                <label for="linkedEmployee">Linked Employee</label>
								<select class="form-control" id="linkedEmployee">
										
								</select>
                            </div>
							
						</div>
					</div>
					<div class="tab-pane" id="tab2" role="tabpanel" aria-expanded="true">
						<div class = "col-lg-5">
								
							<div class="form-group">
                                <label for="markDown">Mark Down(%)*</label>
                                <input class="form-control" id="markDown"  value = "0.00" type="number" step="0.01" name="validation[mark down]" min = "0.00"
																					   data-validation="[L>=1]"
																					   data-validation-message="Please enter a valid $">
                            </div>
							
							<div class="form-group">
                                <label for="promptPaymentDiscount">Upfront / Prompt Payment Discount(%)</label>
                                <input class="form-control" id="promptPaymentDiscount" type="number" step="0.01">
                            </div>
							
							<div class="form-group">
                                <label for="creditPeriod">Credit Period (Days)</label>
                                <input class="form-control" id="creditPeriod" type="number" step="1">
                            </div>
							
							<div class="form-group">
                                <label for="distributorCommission">Distributor Commission (%)</label>
                                <input class="form-control" id="distributorCommission" type="number" step="0.01">
                            </div>
							
						
						</div>
						<div class = "col-lg-5" style="padding-left:100px;">
						
							<div class="form-group">
                                <label for="cashDiscount">Cash Discount(%)</label>
                                <input class="form-control" id="cashDiscount" type="number" step="0.01">
                            </div>
							
							<div class="form-group">
                                <label for="specialDiscount">Special Discount(%)</label>
                                <input class="form-control" id="specialDiscount" type="number" step="0.01">
                            </div>
							
							<div class="form-group">
                                <label for="creditLimit">Credit Limit (INR)</label>
                                <input class="form-control" id="creditLimit" type="number" step="1">
                            </div>
							
							<div class="form-group">
                                <label for="brokerCommission">Broker Commission (%)</label>
                                <input class="form-control" id="brokerCommission" type="number" step="0.01">
                            </div>
							
						</div>
						
						<div class = "col-lg-10">
							<div class="form-group">
								<label class="form-control-label" for="paymentTerms">Payment Terms</label>
								<textarea class="form-control" rows="7" id="paymentTerms"></textarea>
							</div>
						</div>
					</div>
					<div class="tab-pane" id="tab3" role="tabpanel" aria-expanded="true">
						<div class = "col-lg-5">
						
							<div class="form-group">
                                <label for="financialGrouping">Financial Grouping</label>
								<select class="form-control" id="financialGrouping">
										
								</select>
                            </div>
							<div class="form-group">
                                <label for="vatTinNumber">VAT TIN No.</label>
                                <input class="form-control" id="vatTinNumber" type="text" disabled>
                            </div>
							<div class="form-group">
                                <label for="cstTinNumber">CST TIN No.</label>
                                <input class="form-control" id="cstTinNumber" type="text" disabled>
                            </div>
							<div class="form-group">
                                <label for="gstNumber">GST Number</label>
                                <input class="form-control" id="gstNumber" type="number" step="0.01" disabled>
                            </div>
							
							<div class="form-group">
                                <label for="serviceTaxNumber">Service Tax No.</label>
                                <input class="form-control" id="serviceTaxNumber" type="text">
                            </div>
						
							<div class="form-group">
                                <label for="panNumber">PAN Number</label>
                                <input class="form-control" id="panNumber" type="text">
                            </div>
						</div>
						<script>
						function resetTaxes(){							
								document.getElementById('vatRateApplicable').disabled=true;
								document.getElementById('vatRateApplicable').value ='';
								document.getElementById('vatTinNumber').disabled=true;
								document.getElementById('vatTinNumber').value =''
								document.getElementById('cstRateApplicable').disabled=true;
								document.getElementById('cstRateApplicable').value='';
								document.getElementById('cstTinNumber').disabled=true;
								document.getElementById('cstTinNumber').value='';
								document.getElementById('cstRateAgainstFormC').disabled=true;
								document.getElementById('cstRateAgainstFormC').value='';
								document.getElementById('gstRateApplicable').disabled=true;
								document.getElementById('gstRateApplicable').value='';
								document.getElementById('gstNumber').disabled=true;
								document.getElementById('gstNumber').value='';
						}
						function manageTaxes(){
							resetTaxes();
							if(document.getElementById('vatIsApplicable').checked){
								document.getElementById('vatRateApplicable').disabled=false;
								document.getElementById('vatTinNumber').disabled=false;
							} else if (document.getElementById('cstIsApplicable').checked) {
								document.getElementById('cstRateApplicable').disabled=false;
								document.getElementById('cstTinNumber').disabled=false;
								document.getElementById('cstRateAgainstFormC').disabled=false;
							} else if (document.getElementById('gstIsApplicable').checked){
								document.getElementById('gstRateApplicable').disabled=false;
								document.getElementById('gstNumber').disabled=false;
							}
						}
						</script>
						<div class = "col-lg-5" style="padding-left:100px;">
							<div class="form-group">
								<label class="form-control-label" for="taxApplicable">Tax Applicable*</label><br/>
                                <input id="vatIsApplicable" name = "taxApplicable" type="checkbox" value="vat" style="margin:11px" 
								onclick="document.getElementById('cstIsApplicable').checked=false;
										document.getElementById('gstIsApplicable').checked=false;
										manageTaxes();">VAT
								
								<input id="cstIsApplicable" name = "taxApplicable" type="checkbox" value="cst" style="margin:11px" 
								onclick="document.getElementById('vatIsApplicable').checked=false;
										document.getElementById('gstIsApplicable').checked=false;
										manageTaxes();">CST
								
								<input id="gstIsApplicable" name = "taxApplicable" type="checkbox" value="gst" style="margin:11px"
								onclick = "document.getElementById('vatIsApplicable').checked=false;
											document.getElementById('cstIsApplicable').checked=false;
											manageTaxes();">GST
								
								<input id="octroiLbtEntryTaxIsApplicable" name = "taxApplicable" type="checkbox" value="gst" style="margin:11px"
								onclick="document.getElementById('octroiLbtEntryTaxApplicable').disabled=!this.checked;
										document.getElementById('octroiLbtEntryTaxApplicable').value='';">Octroi / LBT / Entry Tax
                            </div>
							
							<div class="form-group">
								<div id = "taxErrorDiv"  style = "display:none"><span style="color:#FF0000; margin:20px;">Please select atleast 1 applicable tax</span></br></br></div>
                                <label for="vatRateApplicable">VAT Rate Applicable (%)</label>
                                <input class="form-control" id="vatRateApplicable"  type="number" step="0.01" disabled>
                            </div>
							<div class = "row">
								<div class = "col-lg-6">
									<div class="form-group">
										<label for="cstRateApplicable">CST Rate Applicable (%)</label>
										<input class="form-control" id="cstRateApplicable"  type="number" step="0.01" disabled>
									</div>
								</div>
								<div class = "col-lg-6">
									<div class="form-group">
										<label for="cstRateAgainstFormC">CST Rate against FORM C (%)</label>
										<input class="form-control" id="cstRateAgainstFormC"  type="number" step="0.01" disabled>
									</div>
								</div>
							</div>
														
							<div class="form-group">
                                <label for="gstRateApplicable">GST Rate Applicable (%)</label>
                                <input class="form-control" id="gstRateApplicable"  type="number" step="0.01" disabled>
                            </div>
							

							<div class="form-group">
                                <label for="octroiLbtEntryTaxIsApplicable">Octroi / LBT / Entry Tax Rate applicable (%)</label>
                                <input class="form-control" id="octroiLbtEntryTaxApplicable" type="number" step="0.01" disabled>
                            </div>
			

						</div>
					</div>
					<div class="tab-pane" id="tab4" role="tabpanel" aria-expanded="true">
						<div class = "col-lg-5">
							<div class="form-group">
                                <label for="linkedTransporter">Linked Transport</label>
								<select class="form-control" id="linkedTransporter">
								</select>
                            </div>
							<div class="form-group">
                                <label for="transportContactNumber">Contact Number</label>
                                <input class="form-control" id="transportContactNumber" type="text" onkeypress='return event.charCode >= 48 && event.charCode <= 57'>
                            </div>
							<div class="form-group">
								<label class="form-control-label" for="transportContractTerms">Contract Terms</label>
								<textarea class="form-control" rows="7" id="transportContractTerms"></textarea>
							</div>
						</div>
						<div class = "col-lg-5" style="padding-left:100px;">
							<div class="form-group">
                                <label for="transportContactPerson">Contact Person</label>
                                <input class="form-control" id="transportContactPerson" type="text">
                            </div>
							<div class="form-group">
                                <label for="transportEmailAddress">Email Address</label>
                                <input class="form-control" id="transportEmailAddress" type="text">
                            </div>
							
							<div class="form-group">
                                <label for="transportPaymentTerms">Payment Terms</label>
								<select class="form-control" id="transportPaymentTerms">
								</select>
                            </div>
							
						</div>
					</div>
					<div class="tab-pane" id="tab5" role="tabpanel" aria-expanded="true">
						<div class = "col-lg-10">
							<div class="form-group">
                                <label for="specialInstructions">Special Instructions</label>
                                <input class="form-control" id="specialInstructions" type="text">
                            </div>
							
							<div class="form-group">
								<label class="form-control-label" for="notes">Notes</label>
								<textarea class="form-control" rows="7" id="notes"></textarea>
							</div>
							
							<div class="form-group">
								<label class="form-control-label" for="uploadDocuments">Upload Documents</label>
								<input id="uploadDocuments" type="file">
								<br>
								<div id = "uploadedFiles" style="width:70%">
								</div>
							</div>
							</div>
							
						</div>
					<div class="form-group" >
						<div class="col-md-9" style="padding-bottom:20px;">
							<button type="submit" class="btn width-150 btn-primary" id = "btnSave"  style="margin:10px" onclick="createOrUpdateCustomer()">Save</button>
							<button type="button" class="btn width-150 btn-default" id = "btnBack" style="margin:10px">Back</button>
							<button type="button" class="btn width-150 btn-default" id = "btnNext" style="margin:10px">Next</button>
							<button type="button" class="btn width-150 btn-default" style="margin:10px" onclick="goBackToLandingPage();">Cancel</button>
						</div>
                    </div>
					</div>
				</div>
			</div>

		</div>
	</section>
</div>	
</section>
<div id="deleteFileModal" class="modal-outer-body">

  <!-- Modal content -->
  <div class="modal-content">
    <div class="modal-header">
      <span class="close">&times;</span>
		<h3 style="padding:5px;font-size:15px;">Delete File ?</h3>
    </div>
    <div class="modal-body">
		<span id = "confirmDeleteText">Are you sure you want to delete this File ?</span>	
    </div>
    <div class="modal-footer" style="height:70px;">
		<table>
		<tr>
			<td><button id="buttonConfirmDelete" style = "width:150px;height:40px;display:inline;" class="btn btn Primary">Yes</button></br></td>
			<td><button id="buttonCancel" style = "width:150px;height:40px;display:inline;" class="btn btn Primary" onclick = "closeDeleteFileModal()">Cancel</button></td>
		</tr>
		</table>
    </div>
  </div>

</div>
<script>
	function resetSelect(selectDropDown){
		selectDropDown.selectedIndex = -1;
	}
	
	function showDeleteFileDialog(fileId) {
		document.getElementById('deleteFileModal').style.display = "block";
		document.getElementById('buttonConfirmDelete').onclick = function (){
				var request = new XMLHttpRequest();
				NProgress.start();
				request.onreadystatechange = function(){
					NProgress.inc();
					if(request.readyState == 4){
						var response = JSON.parse(request.response);
						if(request.status == 200){
							if(response.result == "success"){
								window.location = "customer.html?id="+getParameterByName('id'); //refresh
							} else {
								//show error dialog box
								document.getElementById('errorWhileDeletingModal').style.display = "block";
								document.getElementById('buttonCloseErrorWhileDeletingModal').onclick = function (){
									document.getElementById('errorWhileDeletingModal').style.display = "none";
								}
							}
						} else {
							window.location = "index.html";
						}
						NProgress.done();
					}
				};
				
				request.open ("DELETE", base_url + "/AdValoramAdmin/fileService/customer/"+getParameterByName('id')+"/"+fileId, true);
				request.setRequestHeader("Authorization", "Bearer " + localStorage.getItem("token"));
				request.send();
		}
	}

	function closeDeleteFileModal(){
		document.getElementById('deleteFileModal').style.display = 'none';
	}
	
	// Get the modal
	var modal = document.getElementById('deleteFileModal');
	// Get the <span> element that closes the modal
	var span = document.getElementsByClassName("close")[0];

	// When the user clicks on <span> (x), close the modal
	span.onclick = function() {
		modal.style.display = "none";
	}
	function goBackToLandingPage(){
		window.location = "landing-customer.html";
	}

	function displayHideDistBrokerRow(){
		if (document.getElementById("radioRetailer").checked) {
			if(distributorArray != null) {
				document.getElementById("linkedDistributor").disabled = false;
			} else {
				document.getElementById("linkedDistributor").disabled = true;
			}
			if(brokerArray!=null){
				document.getElementById("linkedBroker").disabled = false;
			} else {
				document.getElementById("linkedBroker").disabled = true;
			}
		} else if (document.getElementById("radioDistributor").checked) {
			document.getElementById("linkedDistributor").disabled = true;
			document.getElementById("linkedBroker").disabled = true;
		} else if (document.getElementById("radioBroker").checked) {
			document.getElementById("linkedDistributor").disabled = true;
			document.getElementById("linkedBroker").disabled = true;
		}
	}

var customerId = -1;
$(window).load(function() {
	fetchLocations();
	if(getParameterByName('id')!=null){
		customerId = getParameterByName('id');
		document.getElementById('customerTitle').innerHTML  = "Edit Customer";
		$.getJSON(base_url + "/AdValoramAdmin/common/customer/"+customerId, function(data){
			var result = data.result;
			if(result!='error'){
				var customer = result[0];
				NProgress.start();				
				document.getElementById("companyName").value = customer.companyName;
				
				if ((document.getElementById("radioRetailer").value).localeCompare(customer.customerType) == 0) {//radioRetailer
					document.getElementById("radioRetailer").checked = true;
				} else if ((document.getElementById("radioDistributor").value).localeCompare(customer.customerType) == 0)  {//radioDistributor
					document.getElementById("radioDistributor").checked = true;
				} else if ((document.getElementById("radioBroker").value).localeCompare(customer.customerType) == 0) {//radioBroker
					document.getElementById("radioBroker").checked = true;
				}
				displayHideDistBrokerRow();
				document.getElementById("linkedDistributor").value = customer.linkedDistributor;
				document.getElementById("linkedBroker").value = customer.linkedBroker;
				document.getElementById("billingAddress").value = customer.billingAddress;
				document.getElementById("deliveryAddress").value = customer.deliveryAddress;
				document.getElementById("city").value = customer.city;
				document.getElementById("pinCode").value = customer.pinCode;
				document.getElementById("contactPerson").value = customer.contactPerson;
				document.getElementById("contactNumber").value = customer.contactNumber;
				document.getElementById("emailAddress").value = customer.emailAddress;
				document.getElementById("markDown").value = customer.markDown;
				document.getElementById("cashDiscount").value = customer.cashDiscount;
				document.getElementById("promptPaymentDiscount").value = customer.promptPaymentDiscount;
				document.getElementById("specialDiscount").value = customer.specialDiscount;
				document.getElementById("distributorCommission").value = customer.distributorCommission;
				document.getElementById("brokerCommission").value = customer.brokerCommission;
				document.getElementById("creditPeriod").value = customer.creditPeriod;
				document.getElementById("creditLimit").value = customer.creditLimit;
				document.getElementById("paymentTerms").value = customer.paymentTerms;
				document.getElementById("financialGrouping").value = customer.financialGrouping;
				document.getElementById("vatTinNumber").value = customer.vatTinNumber;
				document.getElementById("cstTinNumber").value = customer.cstTinNumber;
				document.getElementById("serviceTaxNumber").value = customer.serviceTaxNumber;
				document.getElementById("panNumber").value = customer.panNumber;
				
				document.getElementById("vatIsApplicable").checked = customer.vatIsApplicable;
				document.getElementById("cstIsApplicable").checked = customer.cstIsApplicable;
				document.getElementById("gstIsApplicable").checked = customer.gstIsApplicable;
				document.getElementById("octroiLbtEntryTaxIsApplicable").checked = customer.octroiLbtEntryTaxIsApplicable;
				
				manageTaxes();	// ensure this method is called before tax values are set
				
				if(customer.cstIsApplicable) document.getElementById("cstRateApplicable").value = customer.cstRateApplicable;
				if(customer.vatIsApplicable) document.getElementById("vatRateApplicable").value = customer.vatRateApplicable;
				if(customer.cstIsApplicable) document.getElementById("cstRateAgainstFormC").value = customer.cstRateAgainstFormC;
				if(customer.gstIsApplicable) document.getElementById("gstRateApplicable").value = customer.gstRateApplicable;
				if(customer.gstIsApplicable) document.getElementById("gstNumber").value = customer.gstNumber;
				if(customer.octroiLbtEntryTaxIsApplicable) document.getElementById("octroiLbtEntryTaxApplicable").value = customer.octroiLbtEntryTaxApplicable;
				
				document.getElementById("linkedTransporter").value = customer.linkedTransporter;
				
				document.getElementById("transportContactPerson").value = customer.transportContactPerson;
				document.getElementById("transportContactNumber").value = customer.transportContactNumber;
				document.getElementById("transportEmailAddress").value = customer.transportEmailAddress;
				document.getElementById("transportContractTerms").value = customer.transportContractTerms;
				document.getElementById("transportPaymentTerms").value = customer.transportPaymentTerms;
				
				document.getElementById("specialInstructions").value = customer.specialInstructions;
				document.getElementById("notes").value = customer.notes;
				
				//				
				
				var waitToSelectLocation = setInterval(function(){
					if(locationsArray!=null){
						var city = document.getElementById("city");
						for(var i = 0; i < city.length; i++){
							if(city.options[i].text.localeCompare(customer.city.cityName) == 0){
								city.selectedIndex = i;
								refreshLocationDistrictAndState();
								clearInterval(waitToSelectLocation);
								break;
							}
						}
					}
				}, 100);
				
				var waitToSelectLinkedDistributor = setInterval(function(){
					if(distributorArray!=null){
						var linkedDistributor = document.getElementById("linkedDistributor");
						for(var i = 0; i < distributorArray.length; i++){
							if(linkedDistributor.options[i].value.localeCompare(customer.linkedDistributor.id) == 0){
								linkedDistributor.selectedIndex = i;
								clearInterval(waitToSelectLinkedDistributor);
								break;
							}
						}
					}
				}, 100);
				
				var waitToSelectLinkedBroker = setInterval(function(){
					if(distributorArray!=null){
						var linkedBroker = document.getElementById("linkedBroker");
						for(var i = 0; i < distributorArray.length; i++){
							if(linkedBroker.options[i].value.localeCompare(customer.linkedBroker.id) == 0){
								linkedBroker.selectedIndex = i;
								clearInterval(waitToSelectLinkedBroker);
								break;
							}
						}
					}
				}, 100);
				
				var fileDetailsArray = customer.associatedFiles;
				var uploadedFiles = document.getElementById('uploadedFiles');
				var str = "";
					for(var f = 0; f < fileDetailsArray.length; f++){
						str+="<div style='border:1px solid #ccc;padding:10px;margin-top:5px;border-radius: 5px;'>";
						var fileJson = fileDetailsArray[f];
						str+="<a href='" + fileJson.fileLocation + "'>" + fileJson.name + "</a>";
						str+="<i class='fa fa-trash fa-2x' onclick='showDeleteFileDialog("+fileJson.id+")' style='float:right;padding:2px;margin:-4px;' aria-hidden='true'></i></div>"
					}
				}
				uploadedFiles.innerHTML = str;
				NProgress.done();
		});
	}

});

</script>

<script>
	function goBackToLandingPage(){
		window.location = "landing-customer.html";
	}
	
	
	function createOrUpdateCustomer(){
		document.getElementById("taxErrorDiv").style.display = "none";		
		document.getElementById("emailAddressError").style.display = "none";		
		if(!isEmail(document.getElementById('emailAddress').value)){
			document.getElementById("emailAddressError").style.display = "inline-block";		
			$('.nav-tabs-horizontal li:eq(0) a').tab('show');
			return;
		}
		if((document.getElementById("companyName").value.length < 3 ||
			document.getElementById("billingAddress").value.length < 3 ||
			document.getElementById("contactPerson").value.length < 2 ||
			document.getElementById("deliveryAddress").value.length < 3 ||
			document.getElementById("pinCode").value.length < 2 ||
			document.getElementById("city").value == "" ||
			document.getElementById("contactNumber").value.length < 8
			)){
			$('.nav-tabs-horizontal li:eq(0) a').tab('show');
			return;
		}
		
		if(!(document.getElementById("markDown").value > 0)){
			$('.nav-tabs-horizontal li:eq(1) a').tab('show');
			return;
		}
		
		if(!(document.getElementById("vatIsApplicable").checked ||
		document.getElementById("cstIsApplicable").checked ||
		document.getElementById("gstIsApplicable").checked)
		){
			document.getElementById("taxErrorDiv").style.display = "block";		
			$('.nav-tabs-horizontal li:eq(2) a').tab('show');
			return;
		}
		
		var customer = new Object();	

		customer.companyName = document.getElementById("companyName").value;
		
		if (document.getElementById("radioRetailer").checked) {
			customer.customerType = document.getElementById("radioRetailer").value;
			if(document.getElementById("linkedDistributor").selectedIndex > -1){
				customer.linkedDistributor = document.getElementById("linkedDistributor").value;
			} else {
				customer.linkedDistributor = -1;
			}
			
			if(document.getElementById("linkedBroker").selectedIndex > -1){
				customer.linkedBroker = document.getElementById("linkedBroker").value;
			} else {
				customer.linkedBroker = -1;
			}
		} else if (document.getElementById("radioDistributor").checked) {
			customer.customerType = document.getElementById("radioDistributor").value;
			customer.linkedDistributor = '';
			customer.linkedBroker = '';
		} else if (document.getElementById("radioBroker").checked) {
			customer.customerType = document.getElementById("radioBroker").value;
			customer.linkedDistributor = '';
			customer.linkedBroker = '';
		}

		customer.billingAddress = document.getElementById("billingAddress").value;
		customer.deliveryAddress = document.getElementById("deliveryAddress").value;
		customer.city = document.getElementById("city").value;
		customer.pinCode = document.getElementById("pinCode").value;
		customer.contactPerson = document.getElementById("contactPerson").value;
		customer.contactNumber	 = document.getElementById("contactNumber").value;
		customer.emailAddress = document.getElementById("emailAddress").value;
		customer.markDown = document.getElementById("markDown").value;
		customer.cashDiscount = document.getElementById("cashDiscount").value;
		customer.promptPaymentDiscount = document.getElementById("promptPaymentDiscount").value;
		customer.specialDiscount = document.getElementById("specialDiscount").value;
		customer.distributorCommission = document.getElementById("distributorCommission").value;
		customer.brokerCommission = document.getElementById("brokerCommission").value;
		customer.creditPeriod = document.getElementById("creditPeriod").value;
		customer.creditLimit = document.getElementById("creditLimit").value;
		customer.paymentTerms = document.getElementById("paymentTerms").value;
		customer.financialGrouping = document.getElementById("financialGrouping").value;
		customer.vatTinNumber = document.getElementById("vatTinNumber").value;
		customer.cstTinNumber = document.getElementById("cstTinNumber").value;
		customer.serviceTaxNumber = document.getElementById("serviceTaxNumber").value;
		customer.panNumber = document.getElementById("panNumber").value;
		
		customer.vatIsApplicable = document.getElementById("vatIsApplicable").checked;
		customer.cstIsApplicable = document.getElementById("cstIsApplicable").checked;
		customer.gstIsApplicable = document.getElementById("gstIsApplicable").checked;
		customer.octroiLbtEntryTaxIsApplicable = document.getElementById("octroiLbtEntryTaxIsApplicable").checked;
		
		if(cstIsApplicable) customer.cstRateApplicable = document.getElementById("cstRateApplicable").value;
		if(vatIsApplicable) customer.vatRateApplicable = document.getElementById("vatRateApplicable").value;
		if(cstIsApplicable) customer.cstRateAgainstFormC = document.getElementById("cstRateAgainstFormC").value;
		if(gstIsApplicable) customer.gstRateApplicable = document.getElementById("gstRateApplicable").value;
		if(gstIsApplicable) customer.gstNumber = document.getElementById("gstNumber").value;
		if(octroiLbtEntryTaxIsApplicable) customer.octroiLbtEntryTaxApplicable = document.getElementById("octroiLbtEntryTaxApplicable").value;
		
		customer.linkedTransporter = document.getElementById("linkedTransporter").value;
		
		customer.transportContactPerson = document.getElementById("transportContactPerson").value;
		customer.transportContactNumber = document.getElementById("transportContactNumber").value;
		customer.transportEmailAddress = document.getElementById("transportEmailAddress").value;
		customer.transportContractTerms = document.getElementById("transportContractTerms").value;
		customer.transportPaymentTerms = document.getElementById("transportPaymentTerms").value;
		customer.filesMetaData = '';
		customer.specialInstructions = document.getElementById("specialInstructions").value;
		customer.notes = document.getElementById("notes").value;
		
		document.getElementById('btnSave').disabled = true;
		NProgress.start();
		var request = new XMLHttpRequest();
		request.onreadystatechange = function(){
			console.log(request.readyState+" " + request.status);
			NProgress.inc();
			if(request.readyState == 4 && request.status == 200){
				var response = JSON.parse(request.response);
				if(response.result == "success"){
					if(document.getElementById('uploadDocuments').files.length==0){
						window.location = "landing-customer.html";
						return;
					}
					var uploadDocuments = document.getElementById("uploadDocuments");
					var formData = new FormData();
					for (var i = 0, len = document.getElementById('uploadDocuments').files.length; i < len; i++) {
						formData.append("file", document.getElementById('uploadDocuments').files[i]);
					}
					
					//send formData to server-side
					$.ajax({
						url : base_url + '/AdValoramAdmin/fileService/customer/' + response.objectId,
						type : 'post',
						beforeSend: function(request) {
							request.setRequestHeader("Authorization", "Bearer " + localStorage.getItem("token"));
						},
						data : formData,
						dataType : 'json',
						async : true,
						processData: false,  // tell jQuery not to process the data
						contentType: false,   // tell jQuery not to set contentType
						error : function(request){
							console.log(request.responseText);
							alert(request.responseText);
						},
						success : function(json){
							//place your code here
							NProgress.done();
							window.location = "landing-customer.html";
						}
					});
				}
			}
		};
		if(customerId < 0){
			request.open ("POST", base_url + "/AdValoramAdmin/customer", true);
		} else {
			request.open ("PUT", base_url + "/AdValoramAdmin/customer/" + customerId, true);
		}
		request.setRequestHeader("content-type", "application/json");
		request.setRequestHeader("Authorization", "Bearer " + localStorage.getItem("token"));
		request.send(JSON.stringify(customer));
	}
</script>
</body>
</html>